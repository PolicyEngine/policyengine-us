
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WIC &#8212; OpenFisca-US documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">OpenFisca-US documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   OpenFisca-US
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Programs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="usda/snap.html">
   SNAP
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="usda/school_meals.html">
   School meals
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/programs/wic.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/PolicyEngine/openfisca-us"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/PolicyEngine/openfisca-us/issues/new?title=Issue%20on%20page%20%2Fprograms/wic.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/PolicyEngine/openfisca-us/edit/master/docs/book/programs/wic.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/PolicyEngine/openfisca-us/master?urlpath=tree/docs/book/programs/wic.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-earnings-affect-a-one-person-household-s-wic-benefit-value">
     How earnings affect a one-person household’s WIC benefit value
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-housing-costs-affect-a-four-person-household-s-snap-benefits">
     How housing costs affect a four-person household’s SNAP benefits
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>WIC</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-earnings-affect-a-one-person-household-s-wic-benefit-value">
     How earnings affect a one-person household’s WIC benefit value
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-housing-costs-affect-a-four-person-household-s-snap-benefits">
     How housing costs affect a four-person household’s SNAP benefits
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="wic">
<h1>WIC<a class="headerlink" href="#wic" title="Permalink to this headline">¶</a></h1>
<p>The Special Supplemental Nutrition Program for Women, Infants, and Children (WIC) provides vouchers for food and formula to low-income mothers and children deemed to be at nutritional risk.
The Food and Nutrition Service (FNS), a division of the United States Department of Agriculture (USDA), administers the WIC program.</p>
<p><a class="reference external" href="https://www.ers.usda.gov/topics/food-nutrition-assistance/wic-program/">USDA reports</a> that:</p>
<blockquote>
<div><p>Federal program costs for WIC totaled $4.9 billion in fiscal year 2020.</p>
</div></blockquote>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="how-earnings-affect-a-one-person-household-s-wic-benefit-value">
<h3>How earnings affect a one-person household’s WIC benefit value<a class="headerlink" href="#how-earnings-affect-a-one-person-household-s-wic-benefit-value" title="Permalink to this headline">¶</a></h3>
<p>A pregnant woman at nutritional risk with no income is eligible for WIC, which will provide a benefit valued at $37 per month.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">openfisca_us</span> <span class="kn">import</span> <span class="n">IndividualSim</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="n">sim</span> <span class="o">=</span> <span class="n">IndividualSim</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2022</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add_person</span><span class="p">(</span>
    <span class="n">is_pregnant</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">is_wic_at_nutritional_risk</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span>

<span class="nb">round</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="s2">&quot;wic&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">VariableNotFoundError</span><span class="g g-Whitespace">                     </span>Traceback (most recent call last)
<span class="nn">/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/openfisca_core/simulations/simulation_builder.py</span> in <span class="ni">init_variable_values</span><span class="nt">(self, entity, instance_object, instance_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">353</span>             <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">354</span>                 <span class="n">entity</span><span class="o">.</span><span class="n">check_variable_defined_for_entity</span><span class="p">(</span><span class="n">variable_name</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">355</span>             <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>  <span class="c1"># The variable is defined for another entity</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/openfisca_core/entities/entity.py</span> in <span class="ni">check_variable_defined_for_entity</span><span class="nt">(self, variable_name)</span>
<span class="g g-Whitespace">     </span><span class="mi">30</span>     <span class="k">def</span> <span class="nf">check_variable_defined_for_entity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">31</span>         <span class="n">variable_entity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">check_existence</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">entity</span>
<span class="g g-Whitespace">     </span><span class="mi">32</span>         <span class="c1"># Should be this:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/openfisca_core/entities/entity.py</span> in <span class="ni">get_variable</span><span class="nt">(self, variable_name, check_existence)</span>
<span class="g g-Whitespace">     </span><span class="mi">27</span>     <span class="k">def</span> <span class="nf">get_variable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable_name</span><span class="p">,</span> <span class="n">check_existence</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">28</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tax_benefit_system</span><span class="o">.</span><span class="n">get_variable</span><span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="n">check_existence</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">29</span> 

<span class="nn">/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/openfisca_core/taxbenefitsystems/tax_benefit_system.py</span> in <span class="ni">get_variable</span><span class="nt">(self, variable_name, check_existence)</span>
<span class="g g-Whitespace">    </span><span class="mi">298</span>         <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span> <span class="ow">and</span> <span class="n">check_existence</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">299</span>             <span class="k">raise</span> <span class="n">VariableNotFoundError</span><span class="p">(</span><span class="n">variable_name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">300</span>         <span class="k">return</span> <span class="n">found</span>

<span class="ne">VariableNotFoundError</span>: You tried to calculate or to set a value for variable &#39;is_wic_at_nutritional_risk&#39;, but it was not found in the loaded tax and benefit system (openfisca-us@0.28.0).
<span class="n">Are</span> <span class="n">you</span> <span class="n">sure</span> <span class="n">you</span> <span class="n">spelled</span> <span class="s1">&#39;is_wic_at_nutritional_risk&#39;</span> correctly<span class="o">?</span>
<span class="n">If</span> <span class="n">this</span> <span class="n">code</span> <span class="n">used</span> <span class="n">to</span> <span class="n">work</span> <span class="ow">and</span> <span class="n">suddenly</span> <span class="n">does</span> <span class="ow">not</span><span class="p">,</span> <span class="n">this</span> <span class="ow">is</span> <span class="n">most</span> <span class="n">probably</span> <span class="n">linked</span> <span class="n">to</span> <span class="n">an</span> <span class="n">update</span> <span class="n">of</span> <span class="n">the</span> <span class="n">tax</span> <span class="ow">and</span> <span class="n">benefit</span> <span class="n">system</span><span class="o">.</span>
<span class="n">Look</span> <span class="n">at</span> <span class="n">its</span> <span class="n">changelog</span> <span class="n">to</span> <span class="n">learn</span> <span class="n">about</span> <span class="n">renames</span> <span class="ow">and</span> <span class="n">removals</span> <span class="ow">and</span> <span class="n">update</span> <span class="n">your</span> <span class="n">code</span><span class="o">.</span> <span class="n">If</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">official</span> <span class="n">package</span><span class="p">,</span>
<span class="n">it</span> <span class="ow">is</span> <span class="n">probably</span> <span class="n">available</span> <span class="n">on</span> <span class="o">&lt;</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">openfisca</span><span class="o">/</span><span class="n">openfisca</span><span class="o">-</span><span class="n">us</span><span class="o">/</span><span class="n">blob</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">CHANGELOG</span><span class="o">.</span><span class="n">md</span><span class="o">&gt;.</span>

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">SituationParsingError</span><span class="g g-Whitespace">                     </span>Traceback (most recent call last)
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ipykernel_1971</span><span class="o">/</span><span class="mf">200679985.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span> 
<span class="ne">---&gt; </span><span class="mi">11</span> <span class="nb">round</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="s2">&quot;wic&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/openfisca_tools/hypothetical.py</span> in <span class="ni">calc</span><span class="nt">(self, var, period, target, index)</span>
<span class="g g-Whitespace">    </span><span class="mi">159</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">160</span><span class="s2">         if not hasattr(self, &quot;simulation&quot;):</span>
<span class="ne">--&gt; </span><span class="mi">161</span><span class="s2">             self.build()</span>
<span class="g g-Whitespace">    </span><span class="mi">162</span><span class="s2">         period = period or self.year</span>
<span class="g g-Whitespace">    </span><span class="mi">163</span><span class="s2">         entity = self.system.variables[var].entity</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/openfisca_tools/hypothetical.py</span> in <span class="ni">build</span><span class="nt">(self)</span>
<span class="g g-Whitespace">     </span><span class="mi">46</span><span class="s2">     def build(self):</span>
<span class="g g-Whitespace">     </span><span class="mi">47</span><span class="s2">         self.simulation = self.sim_builder.build_from_entities(</span>
<span class="ne">---&gt; </span><span class="mi">48</span><span class="s2">             self.system, self.situation_data</span>
<span class="g g-Whitespace">     </span><span class="mi">49</span><span class="s2">         )</span>
<span class="g g-Whitespace">     </span><span class="mi">50</span><span class="s2">         self.simulation.trace = True</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/openfisca_core/simulations/simulation_builder.py</span> in <span class="ni">build_from_entities</span><span class="nt">(self, tax_benefit_system, input_dict)</span>
<span class="g g-Whitespace">     </span><span class="mi">97</span><span class="s2">                 &#39;No </span><span class="si">{0}</span><span class="s2"> found. At least one </span><span class="si">{0}</span><span class="s2"> must be defined to run a simulation.&#39;.format(tax_benefit_system.person_entity.key))</span>
<span class="g g-Whitespace">     </span><span class="mi">98</span><span class="s2"> </span>
<span class="ne">---&gt; </span><span class="mi">99</span><span class="s2">         persons_ids = self.add_person_entity(simulation.persons.entity, persons_json)</span>
<span class="g g-Whitespace">    </span><span class="mi">100</span><span class="s2"> </span>
<span class="g g-Whitespace">    </span><span class="mi">101</span><span class="s2">         for entity_class in tax_benefit_system.group_entities:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/openfisca_core/simulations/simulation_builder.py</span> in <span class="ni">add_person_entity</span><span class="nt">(self, entity, instances_json)</span>
<span class="g g-Whitespace">    </span><span class="mi">242</span><span class="s2">         for instance_id, instance_object in instances_json.items():</span>
<span class="g g-Whitespace">    </span><span class="mi">243</span><span class="s2">             helpers.check_type(instance_object, dict, [entity.plural, instance_id])</span>
<span class="ne">--&gt; </span><span class="mi">244</span><span class="s2">             self.init_variable_values(entity, instance_object, str(instance_id))</span>
<span class="g g-Whitespace">    </span><span class="mi">245</span><span class="s2"> </span>
<span class="g g-Whitespace">    </span><span class="mi">246</span><span class="s2">         return self.get_ids(entity.plural)</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.12/x64/lib/python3.7/site-packages/openfisca_core/simulations/simulation_builder.py</span> in <span class="ni">init_variable_values</span><span class="nt">(self, entity, instance_object, instance_id)</span>
<span class="g g-Whitespace">    </span><span class="mi">356</span><span class="s2">                 raise SituationParsingError(path_in_json, e.args[0])</span>
<span class="g g-Whitespace">    </span><span class="mi">357</span><span class="s2">             except VariableNotFoundError as e:  # The variable doesn&#39;t exist</span>
<span class="ne">--&gt; </span><span class="mi">358</span><span class="s2">                 raise SituationParsingError(path_in_json, str(e), code = 404)</span>
<span class="g g-Whitespace">    </span><span class="mi">359</span><span class="s2"> </span>
<span class="g g-Whitespace">    </span><span class="mi">360</span><span class="s2">             instance_index = self.get_ids(entity.plural).index(instance_id)</span>

<span class="ne">SituationParsingError</span>: {&#39;people&#39;: {&#39;person_1&#39;: {&#39;is_wic_at_nutritional_risk&#39;: &quot;You tried to calculate or to set a value for variable &#39;is_wic_at_nutritional_risk&#39;, but it was not found in the loaded tax and benefit system (openfisca-us@0.28.0). Are you sure you spelled &#39;is_wic_at_nutritional_risk&#39; correctly? If this code used to work and suddenly does not, this is most probably linked to an update of the tax and benefit system. Look at its changelog to learn about renames and removals and update your code. If it is an official package, it is probably available on &lt;https://github.com/openfisca/openfisca-us/blob/master/CHANGELOG.md&gt;.&quot;}}}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span> <span class="o">=</span> <span class="n">IndividualSim</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2022</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add_person</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mother&quot;</span><span class="p">,</span>
    <span class="n">employment_income</span><span class="o">=</span><span class="mi">000</span> <span class="o">*</span> <span class="mi">12</span><span class="p">,</span> 
    <span class="n">is_mother</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">is_wic_at_nutritional_risk</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add_person</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;infant&quot;</span><span class="p">,</span>
    <span class="n">age</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
    <span class="n">is_wic_at_nutritional_risk</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span>

<span class="n">sim</span><span class="o">.</span><span class="n">add_family</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;family&quot;</span><span class="p">,</span> <span class="n">members</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mother&quot;</span><span class="p">,</span> <span class="s2">&quot;infant&quot;</span><span class="p">])</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add_spm_unit</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;spm_unit&quot;</span><span class="p">,</span> <span class="n">members</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;mother&quot;</span><span class="p">,</span> <span class="s2">&quot;infant&quot;</span><span class="p">])</span>

<span class="nb">round</span><span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="s2">&quot;wic&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>176
</pre></div>
</div>
</div>
</div>
<p>What if their earnings change?
They receive the maximum benefit of $250 per month until they reach $720 in monthly earnings, at which point it starts phasing out until their earnings reach $1,350.
At that point, they continue to receive the $20 minimum monthly benefit until they reach $2,150 per month, 200% of the poverty line, at which point they are no longer eligible.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span><span class="o">.</span><span class="n">vary</span><span class="p">(</span><span class="s2">&quot;employment_income&quot;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">5000</span> <span class="o">*</span> <span class="mi">12</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>

<span class="n">LABELS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">employment_income</span><span class="o">=</span><span class="s2">&quot;Monthly employment income&quot;</span><span class="p">,</span>
    <span class="n">wic</span><span class="o">=</span><span class="s2">&quot;Monthly WIC benefit value&quot;</span><span class="p">,</span>
    <span class="n">mtr</span><span class="o">=</span><span class="s2">&quot;Marginal tax rate&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="nb">dict</span><span class="p">(</span>
        <span class="n">employment_income</span><span class="o">=</span><span class="n">sim</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="s2">&quot;employment_income&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">wic</span><span class="o">=</span><span class="n">sim</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="s2">&quot;wic&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;employment_income&quot;</span><span class="p">,</span> <span class="s2">&quot;wic&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df</span><span class="p">[[</span><span class="s2">&quot;employment_income&quot;</span><span class="p">,</span> <span class="s2">&quot;wic&quot;</span><span class="p">]]</span> <span class="o">/</span> <span class="mi">12</span>
<span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="s2">&quot;employment_income&quot;</span><span class="p">,</span>
    <span class="s2">&quot;wic&quot;</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">LABELS</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;WIC benefit for a one-person household in California&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">xaxis_tickformat</span><span class="o">=</span><span class="s2">&quot;$&quot;</span><span class="p">,</span> <span class="n">yaxis_tickformat</span><span class="o">=</span><span class="s2">&quot;$&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>We can also view their marginal tax rate from the program, revealing that SNAP phases out at 36 cents on the dollar through the phase-out region.
The person also experiences a cliff (infinite marginal tax rate) when they hit 200% of the poverty line.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="s2">&quot;employment_income&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mtr&quot;</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">LABELS</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;SNAP marginal tax rate for a one-person household in California with $600 monthly housing costs&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">xaxis_tickformat</span><span class="o">=</span><span class="s2">&quot;$&quot;</span><span class="p">,</span> <span class="n">yaxis_tickformat</span><span class="o">=</span><span class="s2">&quot;.0%&quot;</span><span class="p">,</span> <span class="n">yaxis_range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</div>
<div class="section" id="how-housing-costs-affect-a-four-person-household-s-snap-benefits">
<h3>How housing costs affect a four-person household’s SNAP benefits<a class="headerlink" href="#how-housing-costs-affect-a-four-person-household-s-snap-benefits" title="Permalink to this headline">¶</a></h3>
<p>We can also visualize how other household characteristics affect SNAP benefits.
For example, what if we vary the housing costs of a four-person household with $2,000 monthly income?</p>
<p>Their SNAP benefit is $409 per month if their housing costs are less than $720 per month. If they spend $1,310 per month on housing, their benefit rises 44% to $588 per month.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sim</span> <span class="o">=</span> <span class="n">IndividualSim</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2022</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add_person</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;parent1&quot;</span><span class="p">,</span> <span class="n">employment_income</span><span class="o">=</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add_person</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;parent2&quot;</span><span class="p">,</span> <span class="n">employment_income</span><span class="o">=</span><span class="mi">1000</span> <span class="o">*</span> <span class="mi">12</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add_person</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;child1&quot;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add_person</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;child2&quot;</span><span class="p">)</span>
<span class="n">sim</span><span class="o">.</span><span class="n">add_spm_unit</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;spm_unit&quot;</span><span class="p">,</span>
    <span class="n">members</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;parent1&quot;</span><span class="p">,</span> <span class="s2">&quot;parent2&quot;</span><span class="p">,</span> <span class="s2">&quot;child1&quot;</span><span class="p">,</span> <span class="s2">&quot;child2&quot;</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">sim</span><span class="o">.</span><span class="n">vary</span><span class="p">(</span><span class="s2">&quot;housing_cost&quot;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2000</span> <span class="o">*</span> <span class="mi">12</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
    <span class="nb">dict</span><span class="p">(</span>
        <span class="n">housing_cost</span><span class="o">=</span><span class="n">sim</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="s2">&quot;housing_cost&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">snap</span><span class="o">=</span><span class="n">sim</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="s2">&quot;snap&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">housing_subsidy_rate</span><span class="o">=</span><span class="n">sim</span><span class="o">.</span><span class="n">deriv</span><span class="p">(</span><span class="s2">&quot;snap&quot;</span><span class="p">,</span> <span class="s2">&quot;housing_cost&quot;</span><span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;housing_cost&quot;</span><span class="p">,</span> <span class="s2">&quot;snap&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s2">&quot;housing_cost&quot;</span><span class="p">,</span> <span class="s2">&quot;snap&quot;</span><span class="p">]]</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">round</span><span class="p">()</span>


<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="s2">&quot;housing_cost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;snap&quot;</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">LABELS</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;SNAP benefit for a four-person household in California with $1,000 monthly earnings&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span>
    <span class="n">xaxis_tickformat</span><span class="o">=</span><span class="s2">&quot;$&quot;</span><span class="p">,</span>
    <span class="n">yaxis_tickformat</span><span class="o">=</span><span class="s2">&quot;$&quot;</span><span class="p">,</span>
    <span class="n">yaxis_range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">snap</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>As before, we can also see the rate at which SNAP increases with housing costs. For this household, SNAP subsidizes housing costs at a rate of 30% for housing costs ranging from $720 to $1,310 per month.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">line</span><span class="p">(</span>
    <span class="n">df</span><span class="p">,</span>
    <span class="s2">&quot;housing_cost&quot;</span><span class="p">,</span>
    <span class="s2">&quot;housing_subsidy_rate&quot;</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="n">LABELS</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;SNAP housing subsidy rate for a one-person household in California with $1,000 monthly earnings&quot;</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">xaxis_tickformat</span><span class="o">=</span><span class="s2">&quot;$&quot;</span><span class="p">,</span> <span class="n">yaxis_tickformat</span><span class="o">=</span><span class="s2">&quot;.0%&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./programs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By PolicyEngine<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>