- name: Senior deduction extension not active in 2028
  period: 2028
  reforms: []
  input:
    people:
      senior1:
        age: 67
      senior2:
        age: 69
      non_senior:
        age: 45
    tax_units:
      tax_unit:
        members: [senior1, senior2, non_senior]
        filing_status: JOINT
        adjusted_gross_income: 100_000
    households:
      household:
        members: [senior1, senior2, non_senior]
        state_code: CA
  output:
    # With no reform, senior deduction should apply in 2028
    additional_senior_deduction_eligible_person:
      - 1  # senior1
      - 1  # senior2
      - 0  # non_senior
    additional_senior_deduction: 12_000  # $6,000 per senior

- name: Senior deduction expires in 2029 without extension
  period: 2029
  reforms: []
  input:
    people:
      senior1:
        age: 67
      senior2:
        age: 69
      non_senior:
        age: 45
    tax_units:
      tax_unit:
        members: [senior1, senior2, non_senior]
        filing_status: JOINT
        adjusted_gross_income: 100_000
    households:
      household:
        members: [senior1, senior2, non_senior]
        state_code: CA
  output:
    # Without reform, senior deduction expires in 2029 so it's still calculated but not included in deductions
    additional_senior_deduction: 12_000

- name: Senior deduction extension active in 2029 - itemizing
  period: 2029
  reforms:
    - gov.contrib.crfb.senior_deduction.extension.set:
        - True
  input:
    people:
      senior1:
        age: 67
      senior2:
        age: 69
      non_senior:
        age: 45
    tax_units:
      tax_unit:
        members: [senior1, senior2, non_senior]
        filing_status: JOINT
        adjusted_gross_income: 100_000
        tax_unit_itemizes: true
    households:
      household:
        members: [senior1, senior2, non_senior]
        state_code: CA
  output:
    # With reform active, senior deduction should apply in 2029
    additional_senior_deduction_eligible_person:
      - 1  # senior1
      - 1  # senior2
      - 0  # non_senior
    additional_senior_deduction: 12_000  # $6,000 per senior

- name: Senior deduction extension active in 2029 - not itemizing
  period: 2029
  reforms:
    - gov.contrib.crfb.senior_deduction.extension.set:
        - True
  input:
    people:
      senior1:
        age: 67
      senior2:
        age: 69
      non_senior:
        age: 45
    tax_units:
      tax_unit:
        members: [senior1, senior2, non_senior]
        filing_status: JOINT
        adjusted_gross_income: 100_000
        tax_unit_itemizes: false
    households:
      household:
        members: [senior1, senior2, non_senior]
        state_code: CA
  output:
    # With reform active, senior deduction should apply in 2029
    additional_senior_deduction_eligible_person:
      - 1  # senior1
      - 1  # senior2
      - 0  # non_senior
    additional_senior_deduction: 12_000  # $6,000 per senior

- name: Senior deduction extension active in 2030 - single filer
  period: 2030
  reforms:
    - gov.contrib.crfb.senior_deduction.extension.set:
        - True
  input:
    people:
      senior:
        age: 70
    tax_units:
      tax_unit:
        members: [senior]
        filing_status: SINGLE
        adjusted_gross_income: 50_000
    households:
      household:
        members: [senior]
        state_code: CA
  output:
    additional_senior_deduction_eligible_person: [1]
    additional_senior_deduction: 6_000

- name: Senior deduction extension active with phase-out for high income
  period: 2030
  reforms:
    - gov.contrib.crfb.senior_deduction.extension.set:
        - True
  input:
    people:
      senior1:
        age: 67
      senior2:
        age: 69
    tax_units:
      tax_unit:
        members: [senior1, senior2]
        filing_status: JOINT
        adjusted_gross_income: 600_000  # High income for phase-out
    households:
      household:
        members: [senior1, senior2]
        state_code: CA
  output:
    additional_senior_deduction_eligible_person:
      - 1  # senior1
      - 1  # senior2
    # Should be phased out at high income
    additional_senior_deduction: 0

- name: Senior deduction extension active in 2035
  period: 2035
  reforms:
    - gov.contrib.crfb.senior_deduction.extension.set:
        - True
  input:
    people:
      senior:
        age: 75
    tax_units:
      tax_unit:
        members: [senior]
        filing_status: SINGLE
        adjusted_gross_income: 40_000
    households:
      household:
        members: [senior]
        state_code: CA
  output:
    additional_senior_deduction_eligible_person: [1]
    additional_senior_deduction: 6_000