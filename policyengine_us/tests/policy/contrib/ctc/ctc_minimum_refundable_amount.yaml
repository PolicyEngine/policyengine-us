- name: Integration test - no earnings, minimum amount should apply
  period: 2024
  reforms: policyengine_us.reforms.ctc.ctc_minimum_refundable_amount.ctc_minimum_refundable_amount
  input:
    gov.contrib.ctc.minimum_refundable.in_effect: true
    gov.contrib.ctc.minimum_refundable.amount[0].amount: 800
    gov.contrib.ctc.minimum_refundable.amount[1].amount: 500
    people:
      person1:
        age: 40
        is_tax_unit_head: true
        employment_income: 0
      child1:
        age: 5
        ctc_qualifying_child: true
    tax_units:
      tax_unit:
        members: [person1, child1]
    households:
      household:
        members: [person1, child1]
  output:
    ctc_minimum_refundable_amount: [0, 800]
    refundable_ctc: 800

- name: Integration test - no earnings, minimum amount should apply
  period: 2024
  reforms: policyengine_us.reforms.ctc.ctc_minimum_refundable_amount.ctc_minimum_refundable_amount
  input:
    gov.contrib.ctc.minimum_refundable.in_effect: true
    gov.contrib.ctc.minimum_refundable.amount[0].amount: 800
    gov.contrib.ctc.minimum_refundable.amount[1].amount: 500
    people:
      person1:
        age: 40
        is_tax_unit_head: true
        employment_income: 100_000
      child1:
        age: 5
        ctc_qualifying_child: true
    tax_units:
      tax_unit:
        members: [person1, child1]
    households:
      household:
        members: [person1, child1]
  output:
    ctc_refundable_maximum: 1_700
    ctc: 2_000
    ctc_minimum_refundable_amount: [0, 800]
    refundable_ctc: 800
