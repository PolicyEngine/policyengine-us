# Test RI Pension Exemption Expansion

- name: RI pension exemption - eligible single filer
  period: 2025
  reforms: policyengine_us.reforms.states.ri.pension_exemption.ri_pension_exemption_reform.ri_pension_exemption
  input:
    gov.contrib.states.ri.pension_exemption.in_effect: true
    gov.contrib.states.ri.pension_exemption.cap: 50000
    gov.contrib.states.ri.pension_exemption.income_limit.SINGLE: 107000
    people:
      person1:
        age: 67
        birth_year: 1958
        taxable_pension_income: 40000
    tax_units:
      tax_unit:
        members: [person1]
        filing_status: SINGLE
        adjusted_gross_income: 80000
    households:
      household:
        members: [person1]
        state_code: RI
  output:
    ri_retirement_income_subtraction_eligible: true
    ri_retirement_income_subtraction: 40000

- name: RI pension exemption - cap at $50000
  period: 2025
  reforms: policyengine_us.reforms.states.ri.pension_exemption.ri_pension_exemption_reform.ri_pension_exemption
  input:
    gov.contrib.states.ri.pension_exemption.in_effect: true
    gov.contrib.states.ri.pension_exemption.cap: 50000
    gov.contrib.states.ri.pension_exemption.income_limit.SINGLE: 107000
    people:
      person1:
        age: 67
        birth_year: 1958
        taxable_pension_income: 75000
    tax_units:
      tax_unit:
        members: [person1]
        filing_status: SINGLE
        adjusted_gross_income: 80000
    households:
      household:
        members: [person1]
        state_code: RI
  output:
    ri_retirement_income_subtraction_eligible: true
    ri_retirement_income_subtraction: 50000

- name: RI pension exemption - joint filers higher income limit
  period: 2025
  reforms: policyengine_us.reforms.states.ri.pension_exemption.ri_pension_exemption_reform.ri_pension_exemption
  input:
    gov.contrib.states.ri.pension_exemption.in_effect: true
    gov.contrib.states.ri.pension_exemption.cap: 50000
    gov.contrib.states.ri.pension_exemption.income_limit.JOINT: 133750
    people:
      person1:
        age: 67
        birth_year: 1958
        taxable_pension_income: 30000
      person2:
        age: 65
        birth_year: 1960
        taxable_pension_income: 20000
    tax_units:
      tax_unit:
        members: [person1, person2]
        filing_status: JOINT
        adjusted_gross_income: 120000
    households:
      household:
        members: [person1, person2]
        state_code: RI
  output:
    ri_retirement_income_subtraction_eligible: true
    ri_retirement_income_subtraction: 50000

- name: RI pension exemption - ineligible due to income
  period: 2025
  reforms: policyengine_us.reforms.states.ri.pension_exemption.ri_pension_exemption_reform.ri_pension_exemption
  input:
    gov.contrib.states.ri.pension_exemption.in_effect: true
    gov.contrib.states.ri.pension_exemption.cap: 50000
    gov.contrib.states.ri.pension_exemption.income_limit.SINGLE: 107000
    people:
      person1:
        age: 67
        birth_year: 1958
        taxable_pension_income: 40000
    tax_units:
      tax_unit:
        members: [person1]
        filing_status: SINGLE
        adjusted_gross_income: 120000
    households:
      household:
        members: [person1]
        state_code: RI
  output:
    ri_retirement_income_subtraction_eligible: false
    ri_retirement_income_subtraction: 0

- name: RI pension exemption - ineligible due to age (not reached SS retirement age)
  period: 2025
  reforms: policyengine_us.reforms.states.ri.pension_exemption.ri_pension_exemption_reform.ri_pension_exemption
  input:
    gov.contrib.states.ri.pension_exemption.in_effect: true
    gov.contrib.states.ri.pension_exemption.cap: 50000
    gov.contrib.states.ri.pension_exemption.income_limit.SINGLE: 107000
    people:
      person1:
        age: 55
        birth_year: 1970
        taxable_pension_income: 40000
    tax_units:
      tax_unit:
        members: [person1]
        filing_status: SINGLE
        adjusted_gross_income: 80000
    households:
      household:
        members: [person1]
        state_code: RI
  output:
    ri_retirement_income_subtraction_eligible: false
    ri_retirement_income_subtraction: 0
