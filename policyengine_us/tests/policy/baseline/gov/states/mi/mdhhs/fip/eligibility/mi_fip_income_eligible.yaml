- name: Enrolled recipient with income below payment standard is eligible
  period: 2025-01
  input:
    employment_income_before_lsr: 6_000  # $500/month
    is_tanf_enrolled: true
    state_code: MI
  output:
    # Enrolled uses Issuance Deficit Test (50% rate):
    # Countable = $500 - [$200 + 50%×$300] = $500 - $350 = $150
    # Payment standard (size 1) = $363
    # $150 < $363 → ELIGIBLE
    mi_fip_income_eligible: true

- name: New applicant with low income passes initial eligibility (20% test)
  period: 2025-01
  input:
    employment_income_before_lsr: 4_800  # $400/month
    is_tanf_enrolled: false
    state_code: MI
  output:
    # Initial eligibility uses 20% deduction:
    # Countable (20%) = $400 - [$200 + 20%×$200] = $400 - $240 = $160
    # Payment standard (size 1) = $363
    # $160 < $363 → ELIGIBLE
    mi_fip_income_eligible: true

- name: New applicant with high income fails initial eligibility (20% test)
  period: 2025-01
  input:
    employment_income_before_lsr: 12_000  # $1,000/month
    is_tanf_enrolled: false
    state_code: MI
  output:
    # Initial eligibility uses 20% deduction:
    # Countable (20%) = $1,000 - [$200 + 20%×$800] = $1,000 - $360 = $640
    # Payment standard (size 1) = $363
    # $640 > $363 → NOT ELIGIBLE
    mi_fip_income_eligible: false

- name: New applicant family of 3 at initial eligibility threshold
  period: 2025-01
  input:
    people:
      parent:
        employment_income_before_lsr: 9_768  # $814/month
        age: 35
      child1:
        age: 8
      child2:
        age: 4
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: MI
  output:
    # Initial eligibility (20% deduction):
    # Countable = $814 - [$200 + 20%×$614] = $814 - $322.80 = $491.20
    # Payment standard (size 3) = $583
    # $491.20 < $583 → ELIGIBLE
    mi_fip_income_eligible: true

- name: New applicant family of 3 just above initial threshold
  period: 2025-01
  input:
    people:
      parent:
        employment_income_before_lsr: 9_900  # $825/month
        age: 35
      child1:
        age: 8
      child2:
        age: 4
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: MI
  output:
    # Initial eligibility (20% deduction):
    # Countable = $825 - [$200 + 20%×$625] = $825 - $325 = $500
    # Payment standard (size 3) = $583
    # $500 < $583 → ELIGIBLE
    mi_fip_income_eligible: true

- name: Household with zero income is eligible
  period: 2025-01
  input:
    employment_income_before_lsr: 0
    state_code: MI
  output:
    mi_fip_income_eligible: true

- name: Household outside Michigan returns false
  period: 2025-01
  input:
    employment_income_before_lsr: 12_000
    state_code: CA
  output:
    mi_fip_income_eligible: false
