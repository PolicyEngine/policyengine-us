# Unit tests for Alaska ATAP countable income
# 7 AAC 45.470 - Income eligibility
# https://www.law.cornell.edu/regulations/alaska/7-AAC-45.470
# Total countable income = countable earned + countable unearned

- name: Case 1, no income.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
        ak_atap_countable_earned_income: 0
        ak_atap_countable_unearned_income: 0
    households:
      household:
        members: [person1, person2]
        state_code: AK
  output:
    ak_atap_countable_income: 0

- name: Case 2, earned income only.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
        ak_atap_countable_earned_income: 300
        ak_atap_countable_unearned_income: 0
    households:
      household:
        members: [person1, person2]
        state_code: AK
  output:
    # Countable = $300 earned + $0 unearned = $300
    ak_atap_countable_income: 300

- name: Case 3, unearned income only.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
        ak_atap_countable_earned_income: 0
        ak_atap_countable_unearned_income: 400
    households:
      household:
        members: [person1, person2]
        state_code: AK
  output:
    # Countable = $0 earned + $400 unearned = $400
    ak_atap_countable_income: 400

- name: Case 4, both earned and unearned income.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
        ak_atap_countable_earned_income: 250
        ak_atap_countable_unearned_income: 150
    households:
      household:
        members: [person1, person2]
        state_code: AK
  output:
    # Countable = $250 earned + $150 unearned = $400
    ak_atap_countable_income: 400

- name: Case 5, high income combination.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
        ak_atap_countable_earned_income: 600
        ak_atap_countable_unearned_income: 300
    households:
      household:
        members: [person1, person2]
        state_code: AK
  output:
    # Countable = $600 earned + $300 unearned = $900
    ak_atap_countable_income: 900
