- name: Exclusion beneficial - no credits, Line 16 reduces tax
  absolute_error_margin: 0.01
  period: 2025
  input:
    age: 68
    taxable_pension_income: 8_000
    is_tax_unit_head: true
    filing_status: SINGLE
    state_code: WI
    wi_taxable_income: 10_000
    wi_income_tax_before_refundable_credits: 350
    wi_refundable_credits: 0
    wi_retirement_income_subtraction: 0
  output:
    # after_exclusion = max(0, 350 - 280) = 70
    # wi_income_tax = 70 - 0 = 70
    wi_income_tax: 70

- name: Exclusion NOT beneficial - refundable credits make standard path better
  absolute_error_margin: 0.01
  period: 2025
  input:
    age: 68
    taxable_pension_income: 2_000
    is_tax_unit_head: true
    filing_status: SINGLE
    state_code: WI
    wi_taxable_income: 10_000
    wi_income_tax_before_refundable_credits: 350
    wi_refundable_credits: 300
    wi_retirement_income_subtraction: 0
  output:
    # reduction = 0, after_exclusion = 350
    # wi_income_tax = 350 - 300 = 50
    wi_income_tax: 50

- name: Not eligible for exclusion - age 64, standard path used
  absolute_error_margin: 0.01
  period: 2025
  input:
    age: 64
    taxable_pension_income: 8_000
    is_tax_unit_head: true
    filing_status: SINGLE
    state_code: WI
    wi_taxable_income: 10_000
    wi_income_tax_before_refundable_credits: 350
    wi_refundable_credits: 0
    wi_retirement_income_subtraction: 0
  output:
    wi_income_tax: 350
