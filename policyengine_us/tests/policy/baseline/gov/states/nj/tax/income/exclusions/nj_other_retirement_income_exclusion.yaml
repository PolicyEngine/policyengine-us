- name: NJ other retirement income exclusion test 1
  # Example from the "Only One Spouse Qualifies for Exclusion" section
  #      of the "Unclaimed Pension Exclusion" section of the New Jersey
  #      "Retirement Income: Understanding Income Tax" document:
  # https://www.nj.gov/treasury/taxation/pdf/pubs/tgi-ee/git1&2.pdf#page=24
  absolute_error_margin: 0.01
  period: 2021
  input:
    people:
      person1:
        is_tax_unit_head: true
        age: 58
        employment_income: 500
        taxable_interest_income: 2_000
        taxable_private_pension_income: 18_000
      person2:
        is_tax_unit_spouse: true
        age: 63
        employment_income: 1_500
        taxable_interest_income: 2_000
        taxable_private_pension_income: 6_000
    tax_units:
      tax_unit:
        members: [person1, person2]
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: NJ
  output:
    nj_pension_retirement_exclusion: 6_000
    nj_other_retirement_income_exclusion: 3_500

- name: taxsim_record_33958_2024.yaml Two eligible people with total income over the exclusion cap
  absolute_error_margin: 2
  period: 2024
  input:
    people:
      person1:
        age: 68
        employment_income: 0.0
        ssi: 0
        wic: 0
        head_start: 0
        early_head_start: 0
        commodity_supplemental_food_program: 0
        qualified_dividend_income: 2969.66335
        long_term_capital_gains: 15745.3645
        short_term_capital_gains: 2146.55175
        taxable_interest_income: 35717.8125
        is_tax_unit_head: true
      person2:
        age: 67
        employment_income: 0.0
        ssi: 0
        wic: 0
        head_start: 0
        early_head_start: 0
        commodity_supplemental_food_program: 0
        qualified_dividend_income: 2969.66335
        long_term_capital_gains: 15745.3645
        short_term_capital_gains: 2146.55175
        taxable_interest_income: 35717.8125
        is_tax_unit_spouse: true
    tax_units:
      tax_unit:
        members: [person1, person2]
        premium_tax_credit: 0
        local_income_tax: 0
        state_sales_tax: 0
    spm_units:
      spm_unit:
        members: [person1, person2]
        snap: 0
        tanf: 0
        free_school_meals: 0
        reduced_price_school_meals: 0
    households:
      household:
        members: [person1, person2]
        state_code: NJ
  output:
    nj_other_retirement_income_exclusion: 56_579
    nj_income_tax: 868

- name: One eligible person without eligible income 
  absolute_error_margin: 2
  period: 2024
  input:
    people:
      person1:
        age: 68
        employment_income: 0.0
        qualified_dividend_income: 0
        is_tax_unit_head: true
      person2:
        age: 47
        employment_income: 0.0
        commodity_supplemental_food_program: 0
        qualified_dividend_income: 2969.66335
        long_term_capital_gains: 15745.3645
        short_term_capital_gains: 2146.55175
        taxable_interest_income: 35717.8125
        is_tax_unit_spouse: true
    tax_units:
      tax_unit:
        members: [person1, person2]
        premium_tax_credit: 0
        local_income_tax: 0
        state_sales_tax: 0
    spm_units:
      spm_unit:
        members: [person1, person2]
        snap: 0
        tanf: 0
        free_school_meals: 0
        reduced_price_school_meals: 0
    households:
      household:
        members: [person1, person2]
        state_code: NJ
  output:
    nj_other_retirement_income_exclusion: 0

- name: One eligible person with eligible income 
  absolute_error_margin: 2
  period: 2024
  input:
    people:
      person1:
        age: 30
        employment_income: 0.0
        qualified_dividend_income: 0
        is_tax_unit_head: true
      person2:
        age: 72
        employment_income: 0.0
        qualified_dividend_income: 2969.66335
        long_term_capital_gains: 15745.3645
        short_term_capital_gains: 2146.55175
        taxable_interest_income: 35717.8125
        is_tax_unit_spouse: true
    tax_units:
      tax_unit:
        members: [person1, person2]
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: NJ
  output:
    nj_other_retirement_income_exclusion: 56_579

- name: One eligible person with eligible income above the exclusion cap
  absolute_error_margin: 2
  period: 2024
  input:
    people:
      person1:
        age: 30
        employment_income: 0.0
        qualified_dividend_income: 0
        is_tax_unit_head: true
      person2:
        age: 72
        employment_income: 0.0
        taxable_interest_income: 110_000
        is_tax_unit_spouse: true
    tax_units:
      tax_unit:
        members: [person1, person2]
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: NJ
  output:
    nj_other_retirement_income_exclusion: 55_000

- name: One eligible person with eligible income above the full exclusion cap
  absolute_error_margin: 2
  period: 2024
  input:
    people:
      person1:
        age: 30
        employment_income: 0.0
        qualified_dividend_income: 0
        is_tax_unit_head: true
      person2:
        age: 72
        employment_income: 0.0
        taxable_interest_income: 160_000
        is_tax_unit_spouse: true
    tax_units:
      tax_unit:
        members: [person1, person2]
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: NJ
  output:
    nj_other_retirement_income_exclusion: 0
