- name: Single filer
  period: 2022
  input:
    state_code: RI
    filing_status: SINGLE
  output:
    ri_standard_deduction: 9_300

- name: Married filing jointly
  period: 2022
  input:
    state_code: RI
    filing_status: JOINT
  output:
    ri_standard_deduction: 18_600

- name: Head of household filer
  period: 2023
  input:
    state_code: RI
    filing_status: HEAD_OF_HOUSEHOLD
  output:
    ri_standard_deduction: 15_050

- name: Married filing separately 
  period: 2023
  input:
    state_code: RI
    filing_status: SEPARATE
  output:
    ri_standard_deduction: 10_025

- name: Single filer
  period: 2022
  input:
    state_code: RI
    filing_status: SINGLE
    ri_standard_deduction_applicable_percentage: 0.2
  output:
    ri_standard_deduction: 1_860

- name: Married filing separately 
  period: 2023
  input:
    state_code: RI
    filing_status: SEPARATE
    ri_standard_deduction_applicable_percentage: 0.4
  output:
    ri_standard_deduction: 4_010

- name: Married filing jointly
  period: 2022
  input:
    state_code: RI
    filing_status: JOINT
    ri_standard_deduction_applicable_percentage: 0.6
  output:
    ri_standard_deduction: 11_160

- name: Head of household filer
  period: 2023
  input:
    state_code: RI
    filing_status: HEAD_OF_HOUSEHOLD
    ri_standard_deduction_applicable_percentage: 0.8
  output:
    ri_standard_deduction: 12_040

- name: Single filer
  period: 2021
  input:
    state_code: RI
    filing_status: SINGLE
    ri_standard_deduction_applicable_percentage: 0.2
  output:
    ri_standard_deduction: 1_810

- name: Married filing separately
  period: 2021
  input:
    state_code: RI
    filing_status: SEPARATE
    ri_standard_deduction_applicable_percentage: 0.4
  output:
    ri_standard_deduction: 3_620

- name: Single filer with full phase_out in 2021
  period: 2021
  input:
    state_code: RI
    filing_status: SINGLE
    ri_standard_deduction_applicable_percentage: 0
  output:
    ri_standard_deduction: 0

- name: Single filer with no phase_out in 2021
  period: 2021
  input:
    state_code: RI
    filing_status: SINGLE
    ri_standard_deduction_applicable_percentage: 1
  output:
    ri_standard_deduction: 9_050

# 2025 tests - verifying phaseout mechanism with 2025 parameters
# Phaseout start: $254,250, increment: $7,250, rate: 20%
- name: Single filer with 80% deduction in 2025 (income $261,500)
  # AGI = $261,500, excess = $7,250 (1 increment), reduction = 20%
  absolute_error_margin: 0.3
  period: 2025
  input:
    state_code: RI
    filing_status: SINGLE
    ri_standard_deduction_applicable_percentage: 0.8
  output:
    # Standard deduction for single in 2025 = $10,900
    # $10,900 * 0.8 = $8,720
    ri_standard_deduction: 8_720

- name: Joint filer with 60% deduction in 2025
  # 2 increments of $7,250 = $14,500 above threshold, 40% reduction
  absolute_error_margin: 0.3
  period: 2025
  input:
    state_code: RI
    filing_status: JOINT
    ri_standard_deduction_applicable_percentage: 0.6
  output:
    # Joint 2025 value = $21,800
    # $21,800 * 0.6 = $13,080
    ri_standard_deduction: 13_080

- name: 2025 - Surviving spouse with full deduction (no phaseout)
  # Verifies SURVIVING_SPOUSE fix: should match JOINT value ($21,800), not SINGLE ($10,900)
  absolute_error_margin: 0.3
  period: 2025
  input:
    state_code: RI
    filing_status: SURVIVING_SPOUSE
    ri_standard_deduction_applicable_percentage: 1
  output:
    ri_standard_deduction: 21_800
