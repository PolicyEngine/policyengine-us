# New Mexico SSI State Supplement Eligibility Unit Tests
# Tests eligibility for the ARSCH shelter care supplement
# Source: 8.106.500.10 NMAC - Payments to Adults in Residential Care

- name: Case 1, elderly SSI recipient in ARSCH facility in NM is eligible.
  period: 2025
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 65
        is_ssi_eligible_individual: true
        is_in_adult_residential_care: true
    households:
      household:
        members: [person1]
        state_code: NM
  output:
    people:
      person1:
        nm_ssi_state_supplement_eligible: true

- name: Case 2, younger adult SSI recipient in ARSCH facility in NM is eligible.
  period: 2025
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 30
        is_ssi_eligible_individual: true
        is_in_adult_residential_care: true
    households:
      household:
        members: [person1]
        state_code: NM
  output:
    people:
      person1:
        nm_ssi_state_supplement_eligible: true

- name: Case 3, not SSI-eligible person in ARSCH facility in NM is ineligible.
  period: 2025
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 65
        is_ssi_eligible_individual: false
        is_in_adult_residential_care: true
    households:
      household:
        members: [person1]
        state_code: NM
  output:
    people:
      person1:
        nm_ssi_state_supplement_eligible: false

- name: Case 4, underage person is ineligible even if SSI-eligible and in ARSCH.
  period: 2025
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 17
        is_ssi_eligible_individual: true
        is_in_adult_residential_care: true
    households:
      household:
        members: [person1]
        state_code: NM
  output:
    people:
      person1:
        nm_ssi_state_supplement_eligible: false

- name: Case 5, exactly age 18 boundary is eligible.
  period: 2025
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 18
        is_ssi_eligible_individual: true
        is_in_adult_residential_care: true
    households:
      household:
        members: [person1]
        state_code: NM
  output:
    people:
      person1:
        nm_ssi_state_supplement_eligible: true

- name: Case 6, SSI-eligible adult NOT in ARSCH facility is ineligible.
  period: 2025
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 65
        is_ssi_eligible_individual: true
        is_in_adult_residential_care: false
    households:
      household:
        members: [person1]
        state_code: NM
  output:
    people:
      person1:
        nm_ssi_state_supplement_eligible: false

- name: Case 7, SSI-eligible adult in ARSCH but wrong state is ineligible.
  period: 2025
  absolute_error_margin: 0.01
  input:
    people:
      person1:
        age: 65
        is_ssi_eligible_individual: true
        is_in_adult_residential_care: true
    households:
      household:
        members: [person1]
        state_code: TX
  output:
    people:
      person1:
        nm_ssi_state_supplement_eligible: false
