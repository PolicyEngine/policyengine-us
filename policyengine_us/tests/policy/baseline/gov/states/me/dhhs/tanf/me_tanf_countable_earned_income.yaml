# Maine TANF Countable Earned Income Tests
# Tests SPM-unit level: sum of per-person disregarded income minus child care deduction
# Note: Per-person disregard logic tested in me_tanf_earned_income_after_disregard_person.yaml
# Source: 22 M.R.S. Section 3762(3)(B)(7-D)

- name: Case 1, earned income with child care deduction.
  period: 2025-01
  input:
    people:
      person1:
        tanf_gross_earned_income: 500
        age: 30
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
        me_tanf_child_care_deduction: 175
    households:
      household:
        members: [person1, person2]
        state_code: ME
  output:
    # $500 - $108 = $392
    # After 50% disregard: $392 * 0.5 = $196
    # After child care: $196 - $175 = $21
    me_tanf_countable_earned_income: 21

- name: Case 2, child care deduction exceeds after-disregard earned.
  period: 2025-01
  input:
    people:
      person1:
        tanf_gross_earned_income: 300
        age: 30
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
        me_tanf_child_care_deduction: 200
    households:
      household:
        members: [person1, person2]
        state_code: ME
  output:
    # $300 - $108 = $192
    # After 50% disregard: $192 * 0.5 = $96
    # After child care: $96 - $200 = -$104, clipped to $0
    me_tanf_countable_earned_income: 0

- name: Case 3, multi-earner household.
  period: 2025-01
  input:
    people:
      person1:
        tanf_gross_earned_income: 600
        age: 35
      person2:
        tanf_gross_earned_income: 400
        age: 33
      person3:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2, person3]
        me_tanf_child_care_deduction: 175
    households:
      household:
        members: [person1, person2, person3]
        state_code: ME
  output:
    # Person 1: ($600 - $108) * 0.5 = $246
    # Person 2: ($400 - $108) * 0.5 = $146
    # Sum = $392
    # After child care: $392 - $175 = $217
    me_tanf_countable_earned_income: 217

- name: Case 4, no child care deduction.
  period: 2025-01
  input:
    people:
      person1:
        tanf_gross_earned_income: 500
        age: 30
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
        me_tanf_child_care_deduction: 0
    households:
      household:
        members: [person1, person2]
        state_code: ME
  output:
    # $500 - $108 = $392
    # After 50% disregard: $392 * 0.5 = $196
    # No child care deduction
    me_tanf_countable_earned_income: 196
