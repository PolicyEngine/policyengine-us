# Unit tests for overall DC Medicaid/Alliance eligibility
# DC Alliance is for immigrants not eligible for federal Medicaid

- name: Eligible - undocumented immigrant meeting all criteria
  period: 2025
  input:
    age: 25
    is_pregnant: false
    dc_medicaid_enrolled: false
    immigration_status: UNDOCUMENTED
    medicaid_income_level: 1.0  # 100% FPL
    state_code: DC
  output:
    dc_medicaid_eligible: true

- name: Eligible - DACA recipient meeting all criteria
  period: 2025
  input:
    age: 25
    is_pregnant: false
    dc_medicaid_enrolled: false
    immigration_status: DACA
    medicaid_income_level: 1.0  # 100% FPL
    state_code: DC
  output:
    dc_medicaid_eligible: true

- name: Not eligible - US citizen (should use federal Medicaid)
  period: 2025
  input:
    age: 25
    is_pregnant: false
    dc_medicaid_enrolled: false
    immigration_status: CITIZEN
    medicaid_income_level: 1.0  # 100% FPL
    state_code: DC
  output:
    dc_medicaid_eligible: false

- name: Not eligible - income too high
  period: 2025
  input:
    age: 25
    is_pregnant: false
    dc_medicaid_enrolled: false
    immigration_status: UNDOCUMENTED
    medicaid_income_level: 2.5  # 250% FPL (above 215% limit)
    state_code: DC
  output:
    dc_medicaid_eligible: false

- name: Not eligible - age too high in 2026 (new applicant)
  period: 2026
  input:
    age: 30
    is_pregnant: false
    dc_medicaid_enrolled: false
    immigration_status: UNDOCUMENTED
    medicaid_income_level: 1.0  # 100% FPL
    state_code: DC
  output:
    dc_medicaid_eligible: false

- name: Eligible - grandfathered by age (existing enrollee)
  period: 2026
  input:
    age: 30
    is_pregnant: false
    dc_medicaid_enrolled: true  # Grandfathered
    immigration_status: UNDOCUMENTED
    medicaid_income_level: 1.0  # 100% FPL
    state_code: DC
  output:
    dc_medicaid_eligible: true

- name: Not eligible - LPR should use federal Medicaid
  period: 2025
  input:
    age: 25
    is_pregnant: false
    dc_medicaid_enrolled: false
    immigration_status: LEGAL_PERMANENT_RESIDENT
    medicaid_income_level: 1.0  # 100% FPL
    state_code: DC
  output:
    dc_medicaid_eligible: false

- name: Eligible - TPS recipient meeting all criteria
  period: 2025
  input:
    age: 25
    is_pregnant: false
    dc_medicaid_enrolled: false
    immigration_status: TPS
    medicaid_income_level: 1.0  # 100% FPL
    state_code: DC
  output:
    dc_medicaid_eligible: true
