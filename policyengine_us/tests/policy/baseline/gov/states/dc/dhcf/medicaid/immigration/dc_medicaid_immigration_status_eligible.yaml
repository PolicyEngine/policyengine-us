# Tests for DC Medicaid/Alliance immigration status eligibility
# DC Alliance covers immigrants NOT eligible for federal Medicaid

# Federally-eligible statuses should NOT qualify for DC Alliance
# (they use federal Medicaid instead)

- name: US citizen NOT eligible for DC Alliance (uses federal Medicaid)
  period: 2025
  input:
    immigration_status: CITIZEN
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: false

- name: LPR NOT eligible for DC Alliance (uses federal Medicaid)
  period: 2025
  input:
    immigration_status: LEGAL_PERMANENT_RESIDENT
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: false

- name: Refugee NOT eligible for DC Alliance (uses federal Medicaid)
  period: 2025
  input:
    immigration_status: REFUGEE
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: false

- name: Asylee NOT eligible for DC Alliance (uses federal Medicaid)
  period: 2025
  input:
    immigration_status: ASYLEE
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: false

# DC Alliance covers undocumented immigrants

- name: Undocumented person eligible for DC Alliance
  period: 2025
  input:
    immigration_status: UNDOCUMENTED
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: true

# DC Alliance covers DACA and TPS recipients

- name: DACA recipient eligible for DC Alliance
  period: 2025
  input:
    immigration_status: DACA
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: true

- name: TPS recipient eligible for DC Alliance
  period: 2025
  input:
    immigration_status: TPS
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: true

- name: DACA_TPS status eligible for DC Alliance
  period: 2025
  input:
    immigration_status: DACA_TPS
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: true

# Multi-person household test

- name: Multi-person household with different immigration statuses
  period: 2025
  input:
    people:
      parent:
        immigration_status: CITIZEN
      child1:
        immigration_status: DACA
      child2:
        immigration_status: UNDOCUMENTED
      child3:
        immigration_status: LEGAL_PERMANENT_RESIDENT
    households:
      household:
        state_code_str: DC
        members: [parent, child1, child2, child3]
  output:
    dc_medicaid_immigration_status_eligible:
      - false  # parent (citizen - uses federal Medicaid)
      - true   # child1 (DACA - covered by DC Alliance)
      - true   # child2 (undocumented - covered by DC Alliance)
      - false  # child3 (LPR - uses federal Medicaid)

# Non-DC residents should not qualify

- name: Person outside DC not eligible for DC-specific variable
  period: 2025
  input:
    immigration_status: UNDOCUMENTED
    state_code_str: VA
  output:
    dc_medicaid_immigration_status_eligible: false

# Test future years - DC Alliance still covers these statuses

- name: Undocumented still covered in 2027
  period: 2027
  input:
    immigration_status: UNDOCUMENTED
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: true

- name: DACA still covered in 2027
  period: 2027
  input:
    immigration_status: DACA
    state_code_str: DC
  output:
    dc_medicaid_immigration_status_eligible: true
