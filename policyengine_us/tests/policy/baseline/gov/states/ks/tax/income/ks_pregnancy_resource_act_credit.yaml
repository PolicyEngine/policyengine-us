# Kansas Pregnancy Resource Act Tax Credit Tests
# Effective: Tax years beginning after December 31, 2023
# Rate: 70% of contributions to eligible charitable organizations
# Type: Nonrefundable (may be carried forward up to 5 years)
# Limits: $5,000,000 per organization per taxpayer per year
#         $10,000,000 statewide cap per year
# Reference: K.S.A. 79-32,316, Notice 24-14, Form K-94
#
# NOTE: Implementation uses charitable_cash_donations as a simplified proxy
# for pregnancy resource organization contributions since we cannot track
# contributions to specific organizations.

- name: Basic pregnancy resource act credit - 70% of donation
  period: 2025
  input:
    people:
      person1:
        charitable_cash_donations: 1_000
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: KS
  output:
    # Credit = 70% of $1,000 = $700
    ks_pregnancy_resource_act_credit: 700

- name: Pregnancy resource act credit - larger donation capped at org limit
  period: 2025
  input:
    people:
      person1:
        employment_income: 100_000
        charitable_cash_donations: 10_000_000
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: KS
  output:
    # Donations capped at $5M per-org limit
    # Credit = 70% of $5,000,000 = $3,500,000
    ks_pregnancy_resource_act_credit: 3_500_000

- name: Pregnancy resource act credit - married filing jointly
  period: 2025
  input:
    people:
      person1:
        employment_income: 80_000
        charitable_cash_donations: 3_000
      person2:
        employment_income: 60_000
        charitable_cash_donations: 2_000
    tax_units:
      tax_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: KS
  output:
    # Combined donations: $3,000 + $2,000 = $5,000
    # Credit = 70% of $5,000 = $3,500
    ks_pregnancy_resource_act_credit: 3_500

- name: Pregnancy resource act credit - zero charitable donations
  period: 2025
  input:
    people:
      person1:
        employment_income: 50_000
        charitable_cash_donations: 0
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: KS
  output:
    # No charitable donations = no credit
    ks_pregnancy_resource_act_credit: 0

- name: Pregnancy resource act credit 2024 - first year effective
  period: 2024
  input:
    people:
      person1:
        employment_income: 75_000
        charitable_cash_donations: 2_500
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: KS
  output:
    # Credit = 70% of $2,500 = $1,750
    ks_pregnancy_resource_act_credit: 1_750

- name: Pregnancy resource act credit not available before 2024
  period: 2023
  input:
    people:
      person1:
        employment_income: 75_000
        charitable_cash_donations: 2_500
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: KS
  output:
    # Credit not available in 2023
    ks_pregnancy_resource_act_credit: 0
