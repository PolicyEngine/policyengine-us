# Kansas TANF earned income deductions test
# Per KEESM 8151: $90 work expense per employed person deducted first
# Per KEESM Implementation Memo 2008-0326: Then 60% of remainder disregarded
# Total deductions = min(gross, $90 * employed_persons) + max(gross - work_expense, 0) * 0.60

- name: Case 1, no earned income.
  period: 2025-01
  input:
    state_code: KS
    tanf_gross_earned_income: 0
  output:
    # No income, no deductions
    ks_tanf_earned_income_deductions: 0

- name: Case 2, earned income below $90.
  period: 2025-01
  input:
    state_code: KS
    tanf_gross_earned_income: 50
  output:
    # Work expense capped at gross: 50
    # Remainder: 0, so 60% of 0 = 0
    # Total: 50 + 0 = 50
    ks_tanf_earned_income_deductions: 50

- name: Case 3, earned income at $90.
  period: 2025-01
  input:
    state_code: KS
    tanf_gross_earned_income: 90
  output:
    # Work expense: 90
    # Remainder: 0, so 60% of 0 = 0
    # Total: 90 + 0 = 90
    ks_tanf_earned_income_deductions: 90

- name: Case 4, earned income $100.
  period: 2025-01
  input:
    state_code: KS
    tanf_gross_earned_income: 100
  output:
    # Work expense: 90
    # Remainder: 100 - 90 = 10
    # 60% disregard: 10 * 0.60 = 6
    # Total: 90 + 6 = 96
    ks_tanf_earned_income_deductions: 96

- name: Case 5, earned income $500.
  period: 2025-01
  input:
    state_code: KS
    tanf_gross_earned_income: 500
  output:
    # Work expense: 90
    # Remainder: 500 - 90 = 410
    # 60% disregard: 410 * 0.60 = 246
    # Total: 90 + 246 = 336
    ks_tanf_earned_income_deductions: 336

- name: Case 6, earned income $1,000.
  period: 2025-01
  input:
    state_code: KS
    tanf_gross_earned_income: 1_000
  output:
    # Work expense: 90
    # Remainder: 1000 - 90 = 910
    # 60% disregard: 910 * 0.60 = 546
    # Total: 90 + 546 = 636
    ks_tanf_earned_income_deductions: 636

- name: Case 7, earned income at $89 (just below $90 threshold).
  period: 2025-01
  input:
    state_code: KS
    tanf_gross_earned_income: 89
  output:
    # Work expense capped at gross: min(89, 90) = 89
    # Remainder: max(89 - 89, 0) = 0
    # 60% disregard: 0 * 0.60 = 0
    # Total: 89 + 0 = 89
    ks_tanf_earned_income_deductions: 89

- name: Case 8, earned income at $91 (just above $90 threshold).
  period: 2025-01
  input:
    state_code: KS
    tanf_gross_earned_income: 91
  output:
    # Work expense: min(91, 90) = 90
    # Remainder: max(91 - 90, 0) = 1
    # 60% disregard: 1 * 0.60 = 0.60
    # Total: 90 + 0.60 = 90.60
    ks_tanf_earned_income_deductions: 90.6

- name: Case 9, two employed persons each earning $500.
  period: 2025-01
  input:
    people:
      parent1:
        tanf_gross_earned_income: 500
      parent2:
        tanf_gross_earned_income: 500
    spm_units:
      spm_unit:
        members: [parent1, parent2]
    households:
      household:
        members: [parent1, parent2]
        state_code: KS
  output:
    # Two employed persons, $90 each = $180 work expense
    # Total gross earned: 500 + 500 = 1000
    # Work expense: min(1000, 180) = 180
    # Remainder: 1000 - 180 = 820
    # 60% disregard: 820 * 0.60 = 492
    # Total: 180 + 492 = 672
    ks_tanf_earned_income_deductions: 672

- name: Case 10, two persons but only one employed.
  period: 2025-01
  input:
    people:
      parent1:
        tanf_gross_earned_income: 500
      parent2:
        tanf_gross_earned_income: 0
    spm_units:
      spm_unit:
        members: [parent1, parent2]
    households:
      household:
        members: [parent1, parent2]
        state_code: KS
  output:
    # One employed person, $90 work expense
    # Total gross earned: 500
    # Work expense: min(500, 90) = 90
    # Remainder: 500 - 90 = 410
    # 60% disregard: 410 * 0.60 = 246
    # Total: 90 + 246 = 336
    ks_tanf_earned_income_deductions: 336

- name: Case 11, three employed persons.
  period: 2025-01
  input:
    people:
      parent1:
        tanf_gross_earned_income: 400
      parent2:
        tanf_gross_earned_income: 300
      child1:
        tanf_gross_earned_income: 200
    spm_units:
      spm_unit:
        members: [parent1, parent2, child1]
    households:
      household:
        members: [parent1, parent2, child1]
        state_code: KS
  output:
    # Three employed persons, $90 each = $270 work expense
    # Total gross earned: 400 + 300 + 200 = 900
    # Work expense: min(900, 270) = 270
    # Remainder: 900 - 270 = 630
    # 60% disregard: 630 * 0.60 = 378
    # Total: 270 + 378 = 648
    ks_tanf_earned_income_deductions: 648
