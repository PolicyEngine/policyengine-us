# Arizona Adoption Expenses Subtraction Tests
# Per A.R.S. 43-1022 and 2025 Form 140 Instructions (Other Subtractions - Item D)
#
# Subtraction limits:
# - Tax Years 2023-2025: $40,000 for all filing statuses
# - Tax Years 2026+: $5,000 (Single/HOH) or $10,000 (Joint)
#
# Qualifying expenses: unreimbursed medical/hospital costs, adoption counseling,
# legal fees, agency fees, other nonrecurring adoption costs
#
# Note: Stepchild adoptions do not qualify

# 2025 tax year tests (during $40,000 limit period)

- name: Single filer with adoption expense under 2025 limit
  period: 2025
  input:
    state_code: AZ
    filing_status: SINGLE
    qualified_adoption_assistance_expense: 25_000
  output:
    # Expense of $25,000 is under the $40,000 limit for 2023-2025
    az_adoption_expense_subtraction: 25_000

- name: Single filer with adoption expense at 2025 limit
  period: 2025
  input:
    state_code: AZ
    filing_status: SINGLE
    qualified_adoption_assistance_expense: 40_000
  output:
    # Expense of $40,000 equals the limit for 2023-2025
    az_adoption_expense_subtraction: 40_000

- name: Single filer with adoption expense over 2025 limit
  period: 2025
  input:
    state_code: AZ
    filing_status: SINGLE
    qualified_adoption_assistance_expense: 55_000
  output:
    # Expense of $55,000 exceeds the $40,000 limit - capped
    az_adoption_expense_subtraction: 40_000

- name: Joint filer with adoption expense under 2025 limit
  period: 2025
  input:
    state_code: AZ
    filing_status: JOINT
    qualified_adoption_assistance_expense: 35_000
  output:
    # Joint filers also have $40,000 limit for 2023-2025
    az_adoption_expense_subtraction: 35_000

- name: Joint filer with adoption expense at 2025 limit
  period: 2025
  input:
    state_code: AZ
    filing_status: JOINT
    qualified_adoption_assistance_expense: 40_000
  output:
    # Joint filers have same $40,000 limit for 2023-2025
    az_adoption_expense_subtraction: 40_000

- name: Head of household with adoption expense
  period: 2025
  input:
    state_code: AZ
    filing_status: HEAD_OF_HOUSEHOLD
    qualified_adoption_assistance_expense: 40_000
  output:
    # HOH has same $40,000 limit for 2023-2025
    az_adoption_expense_subtraction: 40_000

- name: Separate filer with adoption expense
  period: 2025
  input:
    state_code: AZ
    filing_status: SEPARATE
    qualified_adoption_assistance_expense: 40_000
  output:
    # Separate filers have same $40,000 limit for 2023-2025
    az_adoption_expense_subtraction: 40_000

# 2026 tax year tests (after limit change)

- name: Single filer with adoption expense under 2026 limit
  period: 2026
  input:
    state_code: AZ
    filing_status: SINGLE
    qualified_adoption_assistance_expense: 3_000
  output:
    # Expense of $3,000 is under the $5,000 limit for 2026+
    az_adoption_expense_subtraction: 3_000

- name: Single filer with adoption expense at 2026 limit
  period: 2026
  input:
    state_code: AZ
    filing_status: SINGLE
    qualified_adoption_assistance_expense: 5_000
  output:
    # Single/HOH limit is $5,000 for 2026+
    az_adoption_expense_subtraction: 5_000

- name: Single filer with adoption expense over 2026 limit
  period: 2026
  input:
    state_code: AZ
    filing_status: SINGLE
    qualified_adoption_assistance_expense: 8_000
  output:
    # Expense of $8,000 exceeds the $5,000 limit for Single in 2026+
    az_adoption_expense_subtraction: 5_000

- name: Head of household with adoption expense in 2026
  period: 2026
  input:
    state_code: AZ
    filing_status: HEAD_OF_HOUSEHOLD
    qualified_adoption_assistance_expense: 7_500
  output:
    # HOH limit is $5,000 for 2026+ - expense capped
    az_adoption_expense_subtraction: 5_000

- name: Joint filer with adoption expense at 2026 limit
  period: 2026
  input:
    state_code: AZ
    filing_status: JOINT
    qualified_adoption_assistance_expense: 10_000
  output:
    # Joint limit is $10,000 for 2026+
    az_adoption_expense_subtraction: 10_000

- name: Joint filer with adoption expense over 2026 limit
  period: 2026
  input:
    state_code: AZ
    filing_status: JOINT
    qualified_adoption_assistance_expense: 15_000
  output:
    # Expense of $15,000 exceeds the $10,000 limit for Joint in 2026+
    az_adoption_expense_subtraction: 10_000

- name: Zero adoption expenses
  period: 2025
  input:
    state_code: AZ
    filing_status: SINGLE
    qualified_adoption_assistance_expense: 0
  output:
    az_adoption_expense_subtraction: 0

- name: Non-Arizona resident - no subtraction
  period: 2025
  input:
    state_code: CA
    filing_status: SINGLE
    qualified_adoption_assistance_expense: 25_000
  output:
    # Non-Arizona residents do not receive Arizona subtractions
    az_adoption_expense_subtraction: 0
