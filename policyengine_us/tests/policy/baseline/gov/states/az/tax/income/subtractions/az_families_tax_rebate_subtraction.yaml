# Arizona Families Tax Rebate Subtraction Tests
# Per A.R.S. 43-1022 and 2025 Form 140 Instructions (Line 36, Item U)
#
# Background: The Arizona Families Tax Rebate was a one-time payment
# based on 2021 tax returns. The IRS determined it is subject to federal
# income tax, but Arizona provides a subtraction to prevent state taxation.
#
# Rebate Amounts:
# - Dependent under age 17: $250
# - Dependent age 17 or older: $100
# - Young dependents are prioritized for counting
#
# Maximum by filing status:
# - Single/HOH/MFS: 3 dependents, $750 max
# - MFJ: 6 dependents, $1,500 max

# 2021 test - eligibility year for the rebate
- name: 2021 eligibility - single filer with two young dependents
  period: 2021
  input:
    people:
      filer:
        age: 35
        is_tax_unit_dependent: false
      child1:
        age: 8
        is_tax_unit_dependent: true
      child2:
        age: 12
        is_tax_unit_dependent: true
    tax_units:
      tax_unit:
        members: [filer, child1, child2]
        filing_status: SINGLE
    households:
      household:
        members: [filer, child1, child2]
        state_code: AZ
  output:
    # Two dependents under 17 = $500
    az_families_tax_rebate_subtraction: 500

- name: Single filer with one young dependent
  period: 2025
  input:
    people:
      filer:
        age: 35
        is_tax_unit_dependent: false
      child:
        age: 10
        is_tax_unit_dependent: true
    tax_units:
      tax_unit:
        members: [filer, child]
        filing_status: SINGLE
    households:
      household:
        members: [filer, child]
        state_code: AZ
  output:
    # One dependent under 17 = $250
    az_families_tax_rebate_subtraction: 250

- name: Single filer with two young dependents
  period: 2025
  input:
    people:
      filer:
        age: 35
        is_tax_unit_dependent: false
      child1:
        age: 8
        is_tax_unit_dependent: true
      child2:
        age: 12
        is_tax_unit_dependent: true
    tax_units:
      tax_unit:
        members: [filer, child1, child2]
        filing_status: SINGLE
    households:
      household:
        members: [filer, child1, child2]
        state_code: AZ
  output:
    # Two dependents under 17 = $500
    az_families_tax_rebate_subtraction: 500

- name: Single filer with three young dependents - max rebate
  period: 2025
  input:
    people:
      filer:
        age: 35
        is_tax_unit_dependent: false
      child1:
        age: 5
        is_tax_unit_dependent: true
      child2:
        age: 10
        is_tax_unit_dependent: true
      child3:
        age: 14
        is_tax_unit_dependent: true
    tax_units:
      tax_unit:
        members: [filer, child1, child2, child3]
        filing_status: SINGLE
    households:
      household:
        members: [filer, child1, child2, child3]
        state_code: AZ
  output:
    # Three dependents under 17 = $750
    az_families_tax_rebate_subtraction: 750

- name: Single filer with one older dependent
  period: 2025
  input:
    people:
      filer:
        age: 45
        is_tax_unit_dependent: false
      child:
        age: 18
        is_tax_unit_dependent: true
    tax_units:
      tax_unit:
        members: [filer, child]
        filing_status: SINGLE
    households:
      household:
        members: [filer, child]
        state_code: AZ
  output:
    # One dependent 17+ = $100
    az_families_tax_rebate_subtraction: 100

- name: Single filer with mixed age dependents
  period: 2025
  input:
    people:
      filer:
        age: 45
        is_tax_unit_dependent: false
      child1:
        age: 10
        is_tax_unit_dependent: true
      child2:
        age: 15
        is_tax_unit_dependent: true
      child3:
        age: 19
        is_tax_unit_dependent: true
    tax_units:
      tax_unit:
        members: [filer, child1, child2, child3]
        filing_status: SINGLE
    households:
      household:
        members: [filer, child1, child2, child3]
        state_code: AZ
  output:
    # 2 young dependents (2 x $250 = $500) + 1 older (1 x $100 = $100) = $600
    # Max 3 dependents, prioritizing young ones
    az_families_tax_rebate_subtraction: 600

- name: Joint filer with four dependents - all counted
  period: 2025
  input:
    people:
      filer1:
        age: 40
        is_tax_unit_dependent: false
      filer2:
        age: 38
        is_tax_unit_dependent: false
      child1:
        age: 5
        is_tax_unit_dependent: true
      child2:
        age: 10
        is_tax_unit_dependent: true
      child3:
        age: 17
        is_tax_unit_dependent: true
      child4:
        age: 19
        is_tax_unit_dependent: true
    tax_units:
      tax_unit:
        members: [filer1, filer2, child1, child2, child3, child4]
        filing_status: JOINT
    households:
      household:
        members: [filer1, filer2, child1, child2, child3, child4]
        state_code: AZ
  output:
    # MFJ can claim up to 6 dependents
    # 2 young (2 x $250 = $500) + 2 older (2 x $100 = $200) = $700
    az_families_tax_rebate_subtraction: 700

- name: No dependents
  period: 2025
  input:
    people:
      filer:
        age: 30
        is_tax_unit_dependent: false
    tax_units:
      tax_unit:
        members: [filer]
        filing_status: SINGLE
    households:
      household:
        members: [filer]
        state_code: AZ
  output:
    # No dependents = no rebate
    az_families_tax_rebate_subtraction: 0

- name: Non-Arizona resident - no subtraction
  period: 2025
  input:
    people:
      filer:
        age: 35
        is_tax_unit_dependent: false
      child:
        age: 10
        is_tax_unit_dependent: true
    tax_units:
      tax_unit:
        members: [filer, child]
        filing_status: SINGLE
    households:
      household:
        members: [filer, child]
        state_code: CA
  output:
    # Non-Arizona residents do not receive Arizona subtractions
    az_families_tax_rebate_subtraction: 0
