# Pennsylvania TANF Integration Tests
# These tests validate the complete benefit calculation pipeline for PA TANF
# using realistic household scenarios based on PA DHS policy

- name: Single parent with one child - no income - fully eligible
  period: 2024
  input:
    people:
      parent:
        age: 30
        employment_income: 0
      child1:
        age: 5
    spm_units:
      spm_unit:
        members: [parent, child1]
    households:
      household:
        members: [parent, child1]
        state_code: PA
  output:
    # Family of 2: FSA = $316/month = $3,792/year
    # No income, so full benefit
    pa_tanf_maximum_benefit: 3_792
    pa_tanf_countable_income: 0
    pa_tanf: 3_792

- name: Single parent with two children - low earned income - eligible
  period: 2024
  input:
    people:
      parent:
        age: 35
        employment_income: 12_000
      child1:
        age: 8
      child2:
        age: 10
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: PA
  output:
    # Family of 3: FSA = $403/month = $4,836/year
    # Countable income after deductions: $3,060
    # Benefit: $4,836 - $3,060 = $1,776
    pa_tanf_maximum_benefit: 4_836
    pa_tanf_countable_income: 3_060
    pa_tanf: 1_776

- name: Family of four - moderate income - not eligible
  period: 2024
  input:
    people:
      parent:
        age: 32
        employment_income: 18_000
      child1:
        age: 3
      child2:
        age: 7
      child3:
        age: 14
    spm_units:
      spm_unit:
        members: [parent, child1, child2, child3]
    households:
      household:
        members: [parent, child1, child2, child3]
        state_code: PA
  output:
    # Family of 4: FSA = $497/month = $5,964/year
    # Countable income exceeds FSA
    pa_tanf_maximum_benefit: 5_964
    pa_tanf_countable_income: 6_060
    pa_tanf: 0

- name: Pregnant woman with no other children - eligible
  period: 2024
  input:
    people:
      woman:
        age: 25
        employment_income: 6_000
        is_pregnant: true
    spm_units:
      spm_unit:
        members: [woman]
    households:
      household:
        members: [woman]
        state_code: PA
  output:
    # Family of 1: FSA = $205/month = $2,460/year
    pa_tanf_maximum_benefit: 2_460
    pa_tanf_countable_income: 60
    pa_tanf: 2_400

- name: Two-parent family - one parent working - eligible
  period: 2024
  input:
    people:
      parent1:
        age: 28
        employment_income: 15_000
      parent2:
        age: 27
        employment_income: 0
      child1:
        age: 2
      child2:
        age: 4
    spm_units:
      spm_unit:
        members: [parent1, parent2, child1, child2]
    households:
      household:
        members: [parent1, parent2, child1, child2]
        state_code: PA
  output:
    # Family of 4: FSA = $497/month = $5,964/year
    pa_tanf_maximum_benefit: 5_964
    pa_tanf_countable_income: 4_560
    pa_tanf: 1_404

- name: Family with unearned income only - not eligible
  period: 2024
  input:
    people:
      parent:
        age: 45
        employment_income: 0
        social_security: 6_000
      child1:
        age: 10
      child2:
        age: 7
    spm_units:
      spm_unit:
        members: [parent, child1, child2]
    households:
      household:
        members: [parent, child1, child2]
        state_code: PA
  output:
    # Family of 3: FSA = $403/month = $4,836/year
    # Unearned income exceeds FSA
    pa_tanf_maximum_benefit: 4_836
    pa_tanf_countable_income: 6_000
    pa_tanf: 0

- name: Family with both earned and unearned income - eligible
  period: 2024
  input:
    people:
      parent:
        age: 42
        employment_income: 6_000
        social_security: 3_000
      child1:
        age: 12
    spm_units:
      spm_unit:
        members: [parent, child1]
    households:
      household:
        members: [parent, child1]
        state_code: PA
  output:
    # Family of 2: FSA = $316/month = $3,792/year
    pa_tanf_maximum_benefit: 3_792
    pa_tanf_countable_income: 3_060
    pa_tanf: 732

- name: Large family of six - no income - fully eligible
  period: 2024
  input:
    people:
      parent1:
        age: 38
        employment_income: 0
      parent2:
        age: 36
        employment_income: 0
      child1:
        age: 15
      child2:
        age: 12
      child3:
        age: 9
      child4:
        age: 6
    spm_units:
      spm_unit:
        members: [parent1, parent2, child1, child2, child3, child4]
    households:
      household:
        members: [parent1, parent2, child1, child2, child3, child4]
        state_code: PA
  output:
    # Family of 6: FSA = $670/month = $8,040/year
    pa_tanf_maximum_benefit: 8_040
    pa_tanf_countable_income: 0
    pa_tanf: 8_040

- name: Single parent with teenager in school - eligible
  period: 2024
  input:
    people:
      parent:
        age: 39
        employment_income: 8_400
      child1:
        age: 16
        is_full_time_student: true
    spm_units:
      spm_unit:
        members: [parent, child1]
    households:
      household:
        members: [parent, child1]
        state_code: PA
  output:
    # Family of 2: FSA = $316/month = $3,792/year
    pa_tanf_maximum_benefit: 3_792
    pa_tanf_countable_income: 1_260
    pa_tanf: 2_532
