# Idaho TAFI Final Benefit Amount
# Per IDAPA 16.03.08.248: Maximum Grant is $309
# These tests cover edge cases not in integration.yaml

- name: Case 1, earned income grant exceeds cap.
  period: 2025-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 600  # $50/month
      person2:
        age: 10
      person3:
        age: 8
    spm_units:
      spm_unit:
        members: [person1, person2, person3]
    households:
      household:
        members: [person1, person2, person3]
        state_code: ID
  output:
    id_tafi: 309
    # Work Incentive: 389 - 30 = 359, capped at 309

- name: Case 2, very high unearned income results in ineligibility.
  period: 2025-01
  input:
    people:
      person1:
        age: 30
        social_security: 12_000  # $1,000/month
      person2:
        age: 10
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: ID
  output:
    id_tafi: 0
    # Grant: max(309 - 1,000, 0) = 0, ineligible

- name: Case 3, income eligible but resources ineligible.
  period: 2025-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 10
    spm_units:
      spm_unit:
        members: [person1, person2]
        spm_unit_assets: 10_000
    households:
      household:
        members: [person1, person2]
        state_code: ID
  output:
    id_tafi: 0
    # Resources over $5,000 limit

- name: Case 4, size 11 household with earned income capped.
  period: 2025-01
  input:
    people:
      person1:
        age: 35
        employment_income_before_lsr: 6_000  # $500/month
      person2:
        age: 33
      person3:
        age: 17
      person4:
        age: 15
      person5:
        age: 13
      person6:
        age: 11
      person7:
        age: 9
      person8:
        age: 7
      person9:
        age: 5
      person10:
        age: 3
      person11:
        age: 1
    spm_units:
      spm_unit:
        members: [person1, person2, person3, person4, person5, person6, person7, person8, person9, person10, person11]
    households:
      household:
        members: [person1, person2, person3, person4, person5, person6, person7, person8, person9, person10, person11]
        state_code: ID
  output:
    id_tafi: 309
    # Work Incentive: 1,027 - 300 = 727, capped at 309
