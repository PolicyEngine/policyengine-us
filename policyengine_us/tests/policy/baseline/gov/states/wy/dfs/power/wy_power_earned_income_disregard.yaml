# Wyoming POWER Earned Income Disregard Tests
# Tests the flat dollar earned income disregard
# Single/unmarried: $600, Married couple with child: $1,200
# Source: Wyoming Statute 42-2-103

- name: Case 1, single parent receives $600 disregard.
  period: 2026-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 10
    spm_units:
      spm_unit:
        members: [person1, person2]
        spm_unit_is_married: false
    households:
      household:
        members: [person1, person2]
        state_code: WY
  output:
    # Single parent -> $600 disregard
    wy_power_earned_income_disregard: 600

- name: Case 2, married couple with child receives $1,200 disregard.
  period: 2026-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 28
      person3:
        age: 8
    spm_units:
      spm_unit:
        members: [person1, person2, person3]
        spm_unit_is_married: true
    households:
      household:
        members: [person1, person2, person3]
        state_code: WY
  output:
    # Married couple with child in common -> $1,200 disregard
    wy_power_earned_income_disregard: 1_200

- name: Case 3, single individual without child receives $600 disregard.
  period: 2026-01
  input:
    people:
      person1:
        age: 30
        is_pregnant: true
    spm_units:
      spm_unit:
        members: [person1]
        spm_unit_is_married: false
    households:
      household:
        members: [person1]
        state_code: WY
  output:
    # Single individual -> $600 disregard
    wy_power_earned_income_disregard: 600

- name: Case 4, married couple expecting child receives $1,200 disregard.
  period: 2026-01
  input:
    people:
      person1:
        age: 30
        is_pregnant: true
      person2:
        age: 28
    spm_units:
      spm_unit:
        members: [person1, person2]
        spm_unit_is_married: true
    households:
      household:
        members: [person1, person2]
        state_code: WY
  output:
    # Married couple expecting child -> $1,200 disregard
    # Note: has_child checks for age < 18, but unborn child doesn't count
    # So married without born child gets $600 per the code logic
    wy_power_earned_income_disregard: 600

# =============================================================================
# EDGE CASES
# =============================================================================

- name: Edge case 1, married couple WITHOUT child receives $600 disregard.
  period: 2026-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 28
    spm_units:
      spm_unit:
        members: [person1, person2]
        spm_unit_is_married: true
    households:
      household:
        members: [person1, person2]
        state_code: WY
  output:
    # Married couple without child -> $600 disregard (not $1,200)
    # Per W.S. 42-2-103: $1,200 only for "married couple with child in common"
    wy_power_earned_income_disregard: 600

- name: Edge case 2, single parent with multiple children still gets $600 disregard.
  period: 2026-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 16
      person3:
        age: 14
      person4:
        age: 10
      person5:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2, person3, person4, person5]
        spm_unit_is_married: false
    households:
      household:
        members: [person1, person2, person3, person4, person5]
        state_code: WY
  output:
    # Single parent (regardless of number of children) -> $600 disregard
    # Disregard is NOT per-child; it's per household type
    wy_power_earned_income_disregard: 600

- name: Edge case 3, married couple with child exactly 17 years old gets $1,200.
  period: 2026-01
  input:
    people:
      person1:
        age: 40
      person2:
        age: 38
      person3:
        age: 17
    spm_units:
      spm_unit:
        members: [person1, person2, person3]
        spm_unit_is_married: true
    households:
      household:
        members: [person1, person2, person3]
        state_code: WY
  output:
    # Married couple with 17-year-old (< 18) -> $1,200 disregard
    wy_power_earned_income_disregard: 1_200

- name: Edge case 4, married couple with child exactly 18 years old gets $600.
  period: 2026-01
  input:
    people:
      person1:
        age: 40
      person2:
        age: 38
      person3:
        age: 18
    spm_units:
      spm_unit:
        members: [person1, person2, person3]
        spm_unit_is_married: true
    households:
      household:
        members: [person1, person2, person3]
        state_code: WY
  output:
    # Married couple with 18-year-old (NOT < 18) -> $600 disregard
    # 18-year-old doesn't count as "child" for the $1,200 disregard
    wy_power_earned_income_disregard: 600

- name: Edge case 5, large household of 12 single parent gets $600 disregard.
  period: 2026-01
  input:
    people:
      person1:
        age: 45
      person2:
        age: 17
      person3:
        age: 16
      person4:
        age: 14
      person5:
        age: 12
      person6:
        age: 10
      person7:
        age: 9
      person8:
        age: 8
      person9:
        age: 6
      person10:
        age: 5
      person11:
        age: 3
      person12:
        age: 1
    spm_units:
      spm_unit:
        members: [person1, person2, person3, person4, person5, person6, person7, person8, person9, person10, person11, person12]
        spm_unit_is_married: false
    households:
      household:
        members: [person1, person2, person3, person4, person5, person6, person7, person8, person9, person10, person11, person12]
        state_code: WY
  output:
    # Large household (12 people), single parent -> $600 disregard
    # Disregard is based on marital status, not household size
    wy_power_earned_income_disregard: 600
