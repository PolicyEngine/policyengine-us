# Unit tests for Iowa FIP gross earned income
# Earned income includes: employment_income, self_employment_income
# Reference: https://www.legis.iowa.gov/docs/iac/chapter/01-07-2026.441.41.pdf

- name: Case 1, zero earned income.
  period: 2025
  input:
    people:
      person1:
        age: 30
        employment_income: 0
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IA
  output:
    ia_fip_gross_earned_income: 0

- name: Case 2, employment income only.
  period: 2025
  input:
    people:
      person1:
        age: 30
        employment_income: 9_600
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IA
  output:
    ia_fip_gross_earned_income: 9_600

- name: Case 3, self employment income only.
  period: 2025
  input:
    people:
      person1:
        age: 30
        employment_income: 0
        self_employment_income: 12_000
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IA
  output:
    ia_fip_gross_earned_income: 12_000

- name: Case 4, mixed employment and self employment.
  period: 2025
  input:
    people:
      person1:
        age: 30
        employment_income: 6_000
        self_employment_income: 4_000
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IA
  output:
    # $6,000 + $4,000 = $10,000
    ia_fip_gross_earned_income: 10_000

- name: Case 5, multiple earners in household.
  period: 2025
  input:
    people:
      person1:
        age: 35
        employment_income: 10_000
        self_employment_income: 2_000
      person2:
        age: 33
        employment_income: 3_000
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: IA
  output:
    # Person1: $10,000 + $2,000 = $12,000
    # Person2: $3,000
    # Total: $12,000 + $3,000 = $15,000
    ia_fip_gross_earned_income: 15_000

- name: Case 6, unearned income does not count.
  period: 2025
  input:
    people:
      person1:
        age: 30
        employment_income: 5_000
        social_security: 3_000
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IA
  output:
    # Social security is unearned, only employment counts
    ia_fip_gross_earned_income: 5_000

- name: Case 7, non-Iowa state gets zero.
  period: 2025
  input:
    people:
      person1:
        age: 30
        employment_income: 9_600
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IL
  output:
    # defined_for StateCode.IA, other states return 0
    ia_fip_gross_earned_income: 0
