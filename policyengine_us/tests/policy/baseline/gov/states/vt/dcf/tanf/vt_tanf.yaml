# Vermont TANF Benefit Calculation
# Formula: Benefit = Payment Standard - Countable Income
# Minimum benefit: $10
# Source: 33 V.S.A. Section 1103, Rule 2242

- name: Case 1, eligible with no countable income.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 0
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $0 = $709
    vt_tanf: 709

- name: Case 2, eligible with some countable income.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 487.5
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $487.50 = $221.50 -> $221 (rounded down)
    vt_tanf: 221.5

- name: Case 3, ineligible household.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: false
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 0
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Not eligible = no benefit
    vt_tanf: 0

- name: Case 4, benefit below minimum threshold.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 705
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $705 = $4 (below $10 minimum)
    # No payment made when benefit < $10
    vt_tanf: 0

- name: Case 5, income exceeds payment standard.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 800
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $800 = -$91 -> $0 (cannot be negative)
    vt_tanf: 0

- name: Case 6, benefit exactly at minimum.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 699
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $699 = $10 (exactly at minimum)
    vt_tanf: 10

- name: Case 7, larger family with full benefit.
  period: 2024-01
  input:
    people:
      person1:
        age: 35
      person2:
        age: 33
      person3:
        age: 10
      person4:
        age: 7
    spm_units:
      spm_unit:
        members: [person1, person2, person3, person4]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 774
        vt_tanf_countable_income: 0
    households:
      household:
        members: [person1, person2, person3, person4]
        state_code: VT
  output:
    # Full benefit for family of 4: $774
    vt_tanf: 774

# ============================================================
# EDGE CASES - Minimum benefit boundary conditions
# ============================================================

- name: Case 8, benefit one cent above minimum.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 698.99
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $698.99 = $10.01 (above $10 minimum)
    # Payment made: $10.01
    vt_tanf: 10.01

- name: Case 9, benefit at $9.99 (just below minimum).
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 699.01
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $699.01 = $9.99 (below $10 minimum)
    # No payment made when benefit < $10
    vt_tanf: 0

- name: Case 10, benefit at $9.50 (below minimum).
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 699.5
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $699.50 = $9.50 (below $10 minimum)
    # No payment made when benefit < $10
    vt_tanf: 0

- name: Case 11, benefit at $1 (well below minimum).
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 708
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $708 = $1 (well below $10 minimum)
    # No payment made when benefit < $10
    vt_tanf: 0

- name: Case 12, income exactly equals payment standard.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 709
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $709 = $0 (exactly zero)
    vt_tanf: 0

- name: Case 13, large family with partial benefit.
  period: 2024-01
  input:
    people:
      person1:
        age: 45
      person2:
        age: 43
      person3:
        age: 17
      person4:
        age: 15
      person5:
        age: 12
      person6:
        age: 10
      person7:
        age: 7
      person8:
        age: 4
    spm_units:
      spm_unit:
        members: [person1, person2, person3, person4, person5, person6, person7, person8]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 1_442.368
        vt_tanf_countable_income: 500
    households:
      household:
        members: [person1, person2, person3, person4, person5, person6, person7, person8]
        state_code: VT
  output:
    # Benefit: $1,442.368 - $500 = $942.368
    vt_tanf: 942.368

- name: Case 14, benefit at exactly $0.01 (extremely small).
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        vt_tanf_eligible: true
        vt_tanf_payment_standard: 709
        vt_tanf_countable_income: 708.99
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Benefit: $709 - $708.99 = $0.01 (below $10 minimum)
    # No payment made when benefit < $10
    vt_tanf: 0
