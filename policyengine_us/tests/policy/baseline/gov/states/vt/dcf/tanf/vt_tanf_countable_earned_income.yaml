# Vermont TANF Countable Earned Income
# Formula: Countable = Gross Earnings - Disregard
# Disregard = $350 + 25% of (Gross Earnings - $350)
# Source: 33 V.S.A. Section 1103(a)(3)

- name: Case 1, zero earnings.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 0
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Zero earnings = zero countable
    vt_tanf_countable_earned_income: 0

- name: Case 2, earnings below flat disregard.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 3_600  # $300/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Monthly: $300 (below $350 flat disregard)
    # Disregard: $300 (all disregarded since less than $350)
    # Countable: $300 - $300 = $0
    vt_tanf_countable_earned_income: 0

- name: Case 3, earnings at $500 per month.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 6_000  # $500/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Monthly: $500
    # Disregard: $350 + ($500 - $350) * 0.25 = $350 + $37.50 = $387.50
    # Countable: $500 - $387.50 = $112.50
    vt_tanf_countable_earned_income: 112.5

- name: Case 4, earnings at $1,000 per month.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 12_000  # $1,000/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Monthly: $1,000
    # Disregard: $350 + ($1,000 - $350) * 0.25 = $350 + $162.50 = $512.50
    # Countable: $1,000 - $512.50 = $487.50
    vt_tanf_countable_earned_income: 487.5

- name: Case 5, earnings at $2,000 per month.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 24_000  # $2,000/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Monthly: $2,000
    # Disregard: $350 + ($2,000 - $350) * 0.25 = $350 + $412.50 = $762.50
    # Countable: $2,000 - $762.50 = $1,237.50
    vt_tanf_countable_earned_income: 1_237.5

- name: Case 6, earnings exactly at flat disregard threshold.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 4_200  # $350/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Monthly: $350
    # Disregard: $350 + ($350 - $350) * 0.25 = $350 + $0 = $350
    # Countable: $350 - $350 = $0
    vt_tanf_countable_earned_income: 0

# ============================================================
# EDGE CASES - Boundary conditions
# ============================================================

- name: Case 7, earnings one dollar above flat disregard threshold.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 4_212  # $351/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Monthly: $351
    # After flat disregard: $351 - $350 = $1
    # Apply 25% rate disregard: $1 * 0.25 = $0.25
    # Countable: $1 - $0.25 = $0.75
    # Or equivalently: $1 * (1 - 0.25) = $0.75
    vt_tanf_countable_earned_income: 0.75

- name: Case 8, very high earnings.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 120_000  # $10,000/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Monthly: $10,000
    # After flat disregard: $10,000 - $350 = $9,650
    # Apply 25% rate disregard: $9,650 * 0.25 = $2,412.50
    # Countable: $9,650 - $2,412.50 = $7,237.50
    # Or equivalently: $9,650 * (1 - 0.25) = $7,237.50
    vt_tanf_countable_earned_income: 7_237.5

- name: Case 9, earnings one dollar below flat disregard threshold.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 4_188  # $349/month
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: VT
  output:
    # Monthly: $349 (below $350 flat disregard)
    # Disregard covers all earnings
    # Countable: max_($349 - $350, 0) = max_(-$1, 0) = $0
    vt_tanf_countable_earned_income: 0
