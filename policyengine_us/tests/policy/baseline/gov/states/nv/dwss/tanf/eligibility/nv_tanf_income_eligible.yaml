# Unit tests for nv_tanf_income_eligible
# Tests gross income (130% FPL) and net income (need standard) tests

- name: Zero income (eligible)
  period: 2025-01
  input:
    state_code: NV
    spm_unit_size: 3
    tanf_gross_earned_income: 0
    tanf_gross_unearned_income: 0
    nv_tanf_countable_income: 0
  output:
    nv_tanf_income_eligible: true

- name: Passes both tests (eligible)
  period: 2025-01
  input:
    state_code: NV
    spm_unit_size: 3
    tanf_gross_earned_income: 1_000
    tanf_gross_unearned_income: 0
    nv_tanf_countable_income: 800
  output:
    nv_tanf_income_eligible: true

- name: Fails gross income test (above 130% FPL)
  period: 2025-01
  input:
    state_code: NV
    spm_unit_size: 3
    tanf_gross_earned_income: 3_000
    tanf_gross_unearned_income: 0
    nv_tanf_countable_income: 2_400
  output:
    # 130% FPL for size 3: ~$2,887/month
    nv_tanf_income_eligible: false

- name: Fails net income test (above need standard)
  period: 2025-01
  input:
    state_code: NV
    spm_unit_size: 3
    tanf_gross_earned_income: 2_000
    tanf_gross_unearned_income: 0
    nv_tanf_countable_income: 1_500
  output:
    # Need standard for size 3: $1,299/month
    nv_tanf_income_eligible: false

# Boundary tests for 130% FPL gross income threshold
- name: Case 5, gross income exactly at 130% FPL (passes).
  period: 2025-01
  input:
    state_code: NV
    spm_unit_size: 3
    tanf_gross_earned_income: 2_887.08
    tanf_gross_unearned_income: 0
    nv_tanf_countable_income: 0
  output:
    # 130% FPL size 3 = $26,650 * 1.3 / 12 = $2,887.08
    # At threshold = eligible
    nv_tanf_income_eligible: true

- name: Case 6, gross income $1 over 130% FPL (fails).
  period: 2025-01
  input:
    state_code: NV
    spm_unit_size: 3
    tanf_gross_earned_income: 2_888.08
    tanf_gross_unearned_income: 0
    nv_tanf_countable_income: 0
  output:
    # 130% FPL + $1 = $2,888.08 > $2,887.08
    # Above threshold = ineligible
    nv_tanf_income_eligible: false

# Boundary tests for need standard threshold
- name: Case 7, net income exactly at need standard (passes).
  period: 2025-01
  input:
    state_code: NV
    spm_unit_size: 3
    tanf_gross_earned_income: 1_000
    tanf_gross_unearned_income: 0
    nv_tanf_countable_income: 1_299
  output:
    # Need standard size 3 = $1,299
    # At threshold = eligible
    nv_tanf_income_eligible: true

- name: Case 8, net income $1 over need standard (fails).
  period: 2025-01
  input:
    state_code: NV
    spm_unit_size: 3
    tanf_gross_earned_income: 1_000
    tanf_gross_unearned_income: 0
    nv_tanf_countable_income: 1_300
  output:
    # Need standard + $1 = $1,300 > $1,299
    # Above threshold = ineligible
    nv_tanf_income_eligible: false
