- name: income in 1st tax bracket
  period: 2022
  absolute_error_margin: 1
  input:
    sc_taxable_income: 2_800
    state_code: SC
  output:
    # no tax before 3_200
    sc_income_tax_before_non_refundable_credits: 0

- name: income in 2nd tax bracket
  period: 2022
  absolute_error_margin: 1
  input:
    sc_taxable_income: 12_100
    state_code: SC
  output:
    # Result confirmed with the SC Tax Table
    # 12_100*0.03 - 96
    # $96 is mechanically determined by the rate structure
    # $3,200 * 3% = $96
    sc_income_tax_before_non_refundable_credits: 266

- name: income in 3rd tax bracket
  period: 2022
  absolute_error_margin: 1
  input:
    sc_taxable_income: 20_800
    state_code: SC
  output:
    # Result confirmed with the SC Tax Table
    # 20_800*0.065 - 658 = 694
    # $694 is mechanically determined by the rate structure
    # 6.5% * $20,800-(0% * $3,200 + (3% * ($16,040 - $3,200)) + 6.5% * ($20,800 - $16,040))
    # $96 + 6.5% * ($16,040 - $3,200) = $96 + 6.5% * $12,840 = $96 + $834
    sc_income_tax_before_non_refundable_credits: 694

- name: 2021 test for the 3rd bracket
  period: 2021
  input:
    sc_taxable_income: 6_800
    state_code: SC
  output:
    # Result confirmed with the SC Tax Table
    sc_income_tax_before_non_refundable_credits: 116.5

- name: 2021 test for the highest income tax bracket
  period: 2021
  input:
    sc_taxable_income: 16_200
    state_code: SC
  output:
    # Result confirmed with the SC Tax Table
    sc_income_tax_before_non_refundable_credits: 605.2

- name: 2025 income in 1st tax bracket (0% rate)
  period: 2025
  absolute_error_margin: 1
  input:
    sc_taxable_income: 3_000
    state_code: SC
  output:
    # 2025 bracket: $0-$3,560 at 0%
    sc_income_tax_before_non_refundable_credits: 0

- name: 2025 income in 2nd tax bracket (3% rate)
  period: 2025
  absolute_error_margin: 1
  input:
    sc_taxable_income: 10_000
    state_code: SC
  output:
    # 2025 bracket: $3,560-$17,830 at 3%
    # ($10,000 - $3,560) * 0.03 = $193.20
    sc_income_tax_before_non_refundable_credits: 193

- name: 2025 income in 3rd tax bracket (6% rate)
  period: 2025
  absolute_error_margin: 1
  input:
    sc_taxable_income: 25_000
    state_code: SC
  output:
    # 2025 brackets: $0-$3,560 at 0%, $3,560-$17,830 at 3%, $17,830+ at 6%
    # ($17,830 - $3,560) * 0.03 + ($25,000 - $17,830) * 0.06
    # $14,270 * 0.03 + $7,170 * 0.06 = $428.10 + $430.20 = $858.30
    sc_income_tax_before_non_refundable_credits: 858

- name: 2025 boundary, income exactly at $3,560 (0% to 3% threshold)
  period: 2025
  absolute_error_margin: 1
  input:
    sc_taxable_income: 3_560
    state_code: SC
  output:
    # 2025 bracket: $0-$3,560 at 0%, $3,560-$17,830 at 3%
    # Income exactly at $3,560 means all income is in 0% bracket
    # No income has crossed into the 3% bracket yet
    # Tax = $0
    sc_income_tax_before_non_refundable_credits: 0

- name: 2025 boundary, income exactly at $17,830 (3% to 6% threshold)
  period: 2025
  absolute_error_margin: 1
  input:
    sc_taxable_income: 17_830
    state_code: SC
  output:
    # 2025 brackets: $0-$3,560 at 0%, $3,560-$17,830 at 3%, $17,830+ at 6%
    # Income exactly at $17,830 means:
    # - $0 to $3,560 = $0 (0% bracket)
    # - $3,560 to $17,830 = ($17,830 - $3,560) * 0.03 = $14,270 * 0.03 = $428.10
    # No income has crossed into the 6% bracket yet
    # Total tax = $428.10
    sc_income_tax_before_non_refundable_credits: 428
