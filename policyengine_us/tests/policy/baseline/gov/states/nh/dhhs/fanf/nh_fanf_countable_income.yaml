# Tests for NH FANF countable income
# Formula: Countable Income = Countable Earned Income + Countable Unearned Income
# SSI is excluded from unearned income (federal TANF baseline excludes SSI)
# Source: FAM 603; SR 97-03 Dated 02/97

- name: Case 1, zero income.
  period: 2024-01
  input:
    state_code: NH
    nh_fanf_countable_earned_income: 0
    tanf_gross_unearned_income: 0
  output:
    nh_fanf_countable_income: 0

- name: Case 2, earned income only.
  period: 2024-01
  input:
    state_code: NH
    nh_fanf_countable_earned_income: 500
    tanf_gross_unearned_income: 0
  output:
    nh_fanf_countable_income: 500

- name: Case 3, unearned income only.
  period: 2024-01
  input:
    state_code: NH
    nh_fanf_countable_earned_income: 0
    # Unearned income counted in full
    tanf_gross_unearned_income: 300
  output:
    nh_fanf_countable_income: 300

- name: Case 4, both earned and unearned income.
  period: 2024-01
  input:
    state_code: NH
    # After 50% disregard
    nh_fanf_countable_earned_income: 400
    # Unearned income counted in full
    tanf_gross_unearned_income: 200
  output:
    # 400 + 200 = 600
    nh_fanf_countable_income: 600

- name: Case 5, SSI excluded from unearned income.
  period: 2024-01
  input:
    people:
      person1:
        age: 35
        # SSI is YEAR-defined, input as annual
        ssi: 10_000
        # No other unearned income
        social_security: 0
        employment_income_before_lsr: 0
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: NH
  output:
    # SSI is excluded from TANF unearned income sources
    # Therefore countable income should be 0
    nh_fanf_countable_income: 0

# --- Edge Case Tests ---

- name: Edge case, minimum positive income from both sources.
  period: 2024-01
  input:
    state_code: NH
    # $1 from each source
    nh_fanf_countable_earned_income: 1
    tanf_gross_unearned_income: 1
  output:
    # 1 + 1 = 2
    nh_fanf_countable_income: 2

- name: Edge case, large combined income.
  period: 2024-01
  input:
    state_code: NH
    # Large earned income (after 50% disregard)
    nh_fanf_countable_earned_income: 5_000
    # Large unearned income
    tanf_gross_unearned_income: 3_000
  output:
    # 5,000 + 3,000 = 8,000
    nh_fanf_countable_income: 8_000

- name: Edge case, fractional amounts.
  period: 2024-01
  input:
    state_code: NH
    nh_fanf_countable_earned_income: 0.50
    tanf_gross_unearned_income: 0.75
  output:
    # 0.50 + 0.75 = 1.25
    nh_fanf_countable_income: 1.25

- name: Edge case, unearned income much higher than earned.
  period: 2024-01
  input:
    state_code: NH
    nh_fanf_countable_earned_income: 100
    tanf_gross_unearned_income: 2_000
  output:
    # 100 + 2,000 = 2,100
    nh_fanf_countable_income: 2_100
