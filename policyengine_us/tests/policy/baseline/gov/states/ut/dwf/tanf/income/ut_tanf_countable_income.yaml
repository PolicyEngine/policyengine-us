# Unit tests for ut_tanf_countable_income (net countable income calculation)
# Countable income = earned income after deductions + unearned income
# Reference: Utah Admin. Code R986-200-239

- name: No income - zero countable income.
  period: 2024-01
  input:
    state_code: UT
    ut_tanf_earned_income_deduction: 0
    tanf_gross_earned_income: 0
    tanf_gross_unearned_income: 0
  output:
    # Countable = (0 - 0) + 0 = 0
    ut_tanf_countable_income: 0

- name: Earned income only with deductions.
  period: 2024-01
  input:
    state_code: UT
    ut_tanf_earned_income_deduction: 350
    tanf_gross_earned_income: 600
    tanf_gross_unearned_income: 0
  output:
    # Countable = max(600 - 350, 0) + 0 = 250
    ut_tanf_countable_income: 250

- name: Unearned income only.
  period: 2024-01
  input:
    state_code: UT
    ut_tanf_earned_income_deduction: 0
    tanf_gross_earned_income: 0
    tanf_gross_unearned_income: 300
  output:
    # Countable = 0 + 300 = 300
    ut_tanf_countable_income: 300

- name: Both earned and unearned income.
  period: 2024-01
  input:
    state_code: UT
    ut_tanf_earned_income_deduction: 350
    tanf_gross_earned_income: 800
    tanf_gross_unearned_income: 150
  output:
    # Countable = max(800 - 350, 0) + 150 = 450 + 150 = 600
    ut_tanf_countable_income: 600

- name: Earned income deduction exceeds earned income.
  period: 2024-01
  input:
    state_code: UT
    ut_tanf_earned_income_deduction: 400
    tanf_gross_earned_income: 200
    tanf_gross_unearned_income: 100
  output:
    # Countable = max(200 - 400, 0) + 100 = 0 + 100 = 100
    ut_tanf_countable_income: 100

- name: Large earned income with full deductions.
  period: 2024-01
  input:
    state_code: UT
    ut_tanf_earned_income_deduction: 500
    tanf_gross_earned_income: 1_000
    tanf_gross_unearned_income: 200
  output:
    # Countable = max(1,000 - 500, 0) + 200 = 500 + 200 = 700
    ut_tanf_countable_income: 700
