# Tests for il_scretd_maximum_deferral variable
# Maximum annual deferral: $7,500 when eligible, $0 when not
# Source: 320 ILCS 30/3, PIO-64

- name: Case 1, eligible senior receives maximum deferral.
  period: 2024
  input:
    people:
      person1:
        age: 70
        employment_income: 50_000
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IL
  output:
    il_scretd_maximum_deferral: 7_500

- name: Case 2, ineligible person receives zero deferral.
  period: 2024
  input:
    people:
      person1:
        age: 60
        employment_income: 50_000
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IL
  output:
    il_scretd_maximum_deferral: 0

- name: Case 3, income too high receives zero deferral.
  period: 2024
  input:
    people:
      person1:
        age: 70
        employment_income: 80_000
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IL
  output:
    il_scretd_maximum_deferral: 0

# Edge case: Zero income with exact age threshold
- name: Case 4, zero income and age 65 receives maximum deferral.
  period: 2024
  input:
    people:
      person1:
        age: 65
        employment_income: 0
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IL
  output:
    # Age check: 65 >= 65 = true
    # Income check: 0 <= 65,000 = true
    # Eligible: true -> maximum deferral = $7,500
    il_scretd_maximum_deferral: 7_500

# Edge case: Income at threshold boundary with age 65
- name: Case 5, income at limit and age 65 receives maximum deferral.
  period: 2024
  input:
    people:
      person1:
        age: 65
        employment_income: 65_000
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IL
  output:
    # Age check: 65 >= 65 = true
    # Income check: 65,000 <= 65,000 = true
    # Eligible: true -> maximum deferral = $7,500
    il_scretd_maximum_deferral: 7_500

# Edge case: Income just above limit with age 65
- name: Case 6, income one dollar above limit receives zero deferral.
  period: 2024
  input:
    people:
      person1:
        age: 65
        employment_income: 65_001
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IL
  output:
    # Age check: 65 >= 65 = true
    # Income check: 65,001 <= 65,000 = false
    # Eligible: false -> maximum deferral = $0
    il_scretd_maximum_deferral: 0

# Edge case: Age just below threshold with zero income
- name: Case 7, age 64 with zero income receives zero deferral.
  period: 2024
  input:
    people:
      person1:
        age: 64
        employment_income: 0
    tax_units:
      tax_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: IL
  output:
    # Age check: 64 >= 65 = false
    # Eligible: false -> maximum deferral = $0
    il_scretd_maximum_deferral: 0
