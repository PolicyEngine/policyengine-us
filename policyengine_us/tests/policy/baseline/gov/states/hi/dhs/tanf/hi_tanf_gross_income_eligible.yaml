# Unit tests for hi_tanf_gross_income_eligible variable
# Tests gross income against 185% of Standard of Need (SON)
# SON is 100% of 2006 Hawaii FPL (frozen)
#
# Gross Income Limits (185% of SON) by Household Size:
# | Size | SON    | Gross Limit (185%) |
# |------|--------|-------------------|
# | 1    | $939   | $1,737.15         |
# | 2    | $1,265 | $2,340.25         |
# | 3    | $1,590 | $2,941.50         |
# | 4    | $1,916 | $3,544.60         |
# | 5    | $2,242 | $4,147.70         |
#
# Source: HRS Section 346-53; Hawaii TANF State Plan

- name: Case 1, single person with no income.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 0
        tanf_gross_unearned_income: 0
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: HI
  output:
    hi_tanf_gross_income_eligible: true

- name: Case 2, single person under gross income limit.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 1_700
        tanf_gross_unearned_income: 0
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: HI
  output:
    # 1700 < 1737.15 = eligible
    hi_tanf_gross_income_eligible: true

- name: Case 3, single person over gross income limit.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 1_800
        tanf_gross_unearned_income: 0
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: HI
  output:
    # 1800 > 1737.15 = ineligible
    hi_tanf_gross_income_eligible: false

- name: Case 4, family of 2 under gross income limit.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 2_000
        tanf_gross_unearned_income: 0
      person2:
        age: 5
        tanf_gross_earned_income: 0
        tanf_gross_unearned_income: 0
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: HI
  output:
    # 2000 < 2340.25 = eligible
    hi_tanf_gross_income_eligible: true

- name: Case 5, family of 2 over gross income limit.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 2_400
        tanf_gross_unearned_income: 0
      person2:
        age: 5
        tanf_gross_earned_income: 0
        tanf_gross_unearned_income: 0
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: HI
  output:
    # 2400 > 2340.25 = ineligible
    hi_tanf_gross_income_eligible: false

- name: Case 6, family of 3 under gross income limit.
  period: 2024-01
  input:
    people:
      person1:
        age: 35
        tanf_gross_earned_income: 2_500
        tanf_gross_unearned_income: 0
      person2:
        age: 33
        tanf_gross_earned_income: 0
        tanf_gross_unearned_income: 0
      person3:
        age: 8
        tanf_gross_earned_income: 0
        tanf_gross_unearned_income: 0
    spm_units:
      spm_unit:
        members: [person1, person2, person3]
    households:
      household:
        members: [person1, person2, person3]
        state_code: HI
  output:
    # 2500 < 2941.50 = eligible
    hi_tanf_gross_income_eligible: true

- name: Case 7, family of 3 over gross income limit.
  period: 2024-01
  input:
    people:
      person1:
        age: 35
        tanf_gross_earned_income: 3_000
        tanf_gross_unearned_income: 0
      person2:
        age: 33
        tanf_gross_earned_income: 0
        tanf_gross_unearned_income: 0
      person3:
        age: 8
        tanf_gross_earned_income: 0
        tanf_gross_unearned_income: 0
    spm_units:
      spm_unit:
        members: [person1, person2, person3]
    households:
      household:
        members: [person1, person2, person3]
        state_code: HI
  output:
    # 3000 > 2941.50 = ineligible
    hi_tanf_gross_income_eligible: false

- name: Case 8, single person just below threshold (should be eligible).
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 1_737
        tanf_gross_unearned_income: 0
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: HI
  output:
    # 1737 < 1737.15 = eligible (just below limit)
    hi_tanf_gross_income_eligible: true

- name: Case 9, single person just over threshold ($0.01 over).
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 1_737.16
        tanf_gross_unearned_income: 0
    spm_units:
      spm_unit:
        members: [person1]
    households:
      household:
        members: [person1]
        state_code: HI
  output:
    # 1737.16 > 1737.15 = ineligible
    hi_tanf_gross_income_eligible: false
