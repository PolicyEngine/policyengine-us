# Tests for TN FF income eligibility
# For 2021+:
# - CNS size 2: $1,370, GIS: $2,534.50
# - Earned income disregard: $250

- name: Case 1, no income passes both tests.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: TN
  output:
    tn_ff_income_eligible: true

- name: Case 2, gross income over GIS limit.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 3_000
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: TN
  output:
    # Gross income ($3,000) > GIS ($2,534.50)
    tn_ff_income_eligible: false

- name: Case 3, countable income below CNS.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 1_500
      person2:
        age: 5
        is_tax_unit_dependent: true
    spm_units:
      spm_unit:
        members: [person1, person2]
        childcare_expenses: 6_000  # $500/month * 12
    households:
      household:
        members: [person1, person2]
        state_code: TN
  output:
    # Gross: $1,500 < GIS ($2,534.50) - passes
    # Countable after $250 disregard + $175 child care = $1,500 - $250 - $175 = $1,075
    # $1,075 < CNS ($1,370) - passes
    tn_ff_income_eligible: true

- name: Case 4, low income passes both tests.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_earned_income: 500
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: TN
  output:
    # Gross: $500/month < GIS ($2,534.50)
    # Countable: $500 - $250 = $250 < CNS ($1,370)
    tn_ff_income_eligible: true

- name: Case 5, unearned income only passes.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_unearned_income: 1_000
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: TN
  output:
    # Gross: $1,000/month < GIS ($2,534.50)
    # Countable (no disregard for unearned): $1,000 < CNS ($1,370)
    tn_ff_income_eligible: true

- name: Case 6, high unearned income fails net test.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        tanf_gross_unearned_income: 1_500
      person2:
        age: 5
    spm_units:
      spm_unit:
        members: [person1, person2]
    households:
      household:
        members: [person1, person2]
        state_code: TN
  output:
    # Gross: $1,500/month < GIS ($2,534.50) - passes
    # Countable: $1,500 >= CNS ($1,370) - fails
    tn_ff_income_eligible: false
