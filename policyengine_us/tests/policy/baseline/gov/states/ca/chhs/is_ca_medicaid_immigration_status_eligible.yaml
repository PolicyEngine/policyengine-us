# Tests for CA state-funded Medicaid eligibility regardless of immigration status
# Per California Welfare and Institutions Code Section 14007.8

# Age-based eligibility tests (standard pathway)

- name: Case 1, undocumented child under 19 is eligible in 2020.
  period: 2020
  input:
    age: 18
    is_pregnant: false
    immigration_status: UNDOCUMENTED
    state_code: CA
  output:
    is_ca_medicaid_immigration_status_eligible: true

- name: Case 2, undocumented adult 50+ is ineligible in 2020 (before expansion).
  period: 2020
  input:
    age: 50
    is_pregnant: false
    immigration_status: UNDOCUMENTED
    state_code: CA
  output:
    is_ca_medicaid_immigration_status_eligible: false

- name: Case 3, undocumented adult 26+ is ineligible in 2020 (before expansion).
  period: 2020
  input:
    age: 26
    is_pregnant: false
    immigration_status: UNDOCUMENTED
    state_code: CA
  output:
    is_ca_medicaid_immigration_status_eligible: false

- name: Case 4, pregnant undocumented adult is eligible regardless of age.
  period: 2020
  input:
    age: 26
    is_pregnant: true
    immigration_status: UNDOCUMENTED
    state_code: CA
  output:
    is_ca_medicaid_immigration_status_eligible: true

- name: Case 5, undocumented adult 26+ is eligible in 2024 (after expansion).
  period: 2024
  input:
    age: 26
    is_pregnant: false
    immigration_status: UNDOCUMENTED
    state_code: CA
  output:
    is_ca_medicaid_immigration_status_eligible: true

# Continuous coverage tests for 2026 enrollment freeze (UNDOCUMENTED only)

- name: Case 6, undocumented adult not on Medicaid is ineligible in 2026.
  period: 2026
  input:
    age: 35
    is_pregnant: false
    immigration_status: UNDOCUMENTED
    receives_medicaid: false
    state_code: CA
  output:
    is_ca_medicaid_immigration_status_eligible: false

- name: Case 7, undocumented adult on Medicaid retains eligibility in 2026.
  period: 2026
  input:
    age: 35
    is_pregnant: false
    immigration_status: UNDOCUMENTED
    receives_medicaid: true
    state_code: CA
  output:
    # Existing enrollees without SIS retain coverage per Section 14007.8
    is_ca_medicaid_immigration_status_eligible: true

- name: Case 8, undocumented child under 19 is still eligible in 2026 (not affected by freeze).
  period: 2026
  input:
    age: 10
    is_pregnant: false
    immigration_status: UNDOCUMENTED
    receives_medicaid: false
    state_code: CA
  output:
    # Children under 19 remain eligible for new enrollment
    is_ca_medicaid_immigration_status_eligible: true

# DACA/TPS are NOT affected by the enrollment freeze (per WCLP Practice Tip Nov 2025)

- name: Case 9, DACA adult is eligible in 2024.
  period: 2024
  input:
    age: 35
    is_pregnant: false
    immigration_status: DACA
    state_code: CA
  output:
    is_ca_medicaid_immigration_status_eligible: true

- name: Case 10, DACA adult remains eligible in 2026 (not affected by freeze).
  period: 2026
  input:
    age: 35
    is_pregnant: false
    immigration_status: DACA
    receives_medicaid: false
    state_code: CA
  output:
    # Per WCLP: "People with DACA are not impacted by this full-scope Medi-Cal ban"
    is_ca_medicaid_immigration_status_eligible: true

- name: Case 11, TPS adult remains eligible in 2026 (not affected by freeze).
  period: 2026
  input:
    age: 50
    is_pregnant: false
    immigration_status: TPS
    receives_medicaid: false
    state_code: CA
  output:
    # TPS holders are not affected by the enrollment freeze
    is_ca_medicaid_immigration_status_eligible: true

# Immigration statuses NOT covered by CA state-funded program

- name: Case 12, citizen is not eligible for CA state-funded program.
  period: 2024
  input:
    age: 35
    is_pregnant: false
    immigration_status: CITIZEN
    state_code: CA
  output:
    # Citizens use federal Medicaid, not CA state-funded
    is_ca_medicaid_immigration_status_eligible: false

- name: Case 13, LPR is not eligible for CA state-funded program in 2024.
  period: 2024
  input:
    age: 35
    is_pregnant: false
    immigration_status: LEGAL_PERMANENT_RESIDENT
    state_code: CA
  output:
    # LPRs use federal Medicaid, not CA state-funded
    is_ca_medicaid_immigration_status_eligible: false

- name: Case 14, refugee is not eligible for CA state-funded program in 2024.
  period: 2024
  input:
    age: 35
    is_pregnant: false
    immigration_status: REFUGEE
    state_code: CA
  output:
    # Before Oct 2026, refugees have federal eligibility
    is_ca_medicaid_immigration_status_eligible: false

