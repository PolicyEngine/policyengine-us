# Unit tests for wv_tanf_countable_income
# Tests the 40% earned income disregard calculation
# Formula: Countable Income = (Gross Earned × 60%) + Gross Unearned
# Source: WV DHHR WV WORKS Program Page

- name: Case 1, no income.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 0
    tanf_gross_unearned_income: 0
  output:
    # No income = 0 countable
    wv_tanf_countable_income: 0

- name: Case 2, earned income only with 40% disregard.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 500
    tanf_gross_unearned_income: 0
  output:
    # Earned: $500
    # After 40% disregard: 500 × 0.60 = 300
    wv_tanf_countable_income: 300

- name: Case 3, unearned income only with no disregard.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 0
    tanf_gross_unearned_income: 400
  output:
    # Unearned has no disregard
    # Countable = 0 + 400 = 400
    wv_tanf_countable_income: 400

- name: Case 4, mixed income types.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 1_000
    tanf_gross_unearned_income: 200
  output:
    # Earned: $1,000 × 0.60 = 600
    # Unearned: $200 (no disregard)
    # Countable = 600 + 200 = 800
    wv_tanf_countable_income: 800

- name: Case 5, high earned income.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 2_000
    tanf_gross_unearned_income: 0
  output:
    # Earned: $2,000 × 0.60 = 1,200
    wv_tanf_countable_income: 1_200

- name: Case 6, equal earned and unearned.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 500
    tanf_gross_unearned_income: 500
  output:
    # Earned: $500 × 0.60 = 300
    # Unearned: $500 (no disregard)
    # Countable = 300 + 500 = 800
    wv_tanf_countable_income: 800

# Edge Cases

- name: Case 7, boundary - very small earned income.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 1
    tanf_gross_unearned_income: 0
  output:
    # Earned: $1 × 0.60 = 0.60
    wv_tanf_countable_income: 0.6

- name: Case 8, boundary - one dollar of each income type.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 1
    tanf_gross_unearned_income: 1
  output:
    # Earned: $1 × 0.60 = 0.60
    # Unearned: $1 (no disregard)
    # Countable = 0.60 + 1 = 1.60
    wv_tanf_countable_income: 1.6

- name: Case 9, boundary - maximum practical income scenario.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 3_000
    tanf_gross_unearned_income: 1_500
  output:
    # Earned: $3,000 × 0.60 = 1,800
    # Unearned: $1,500 (no disregard)
    # Countable = 1,800 + 1,500 = 3,300
    wv_tanf_countable_income: 3_300

- name: Case 10, large unearned income only.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 0
    tanf_gross_unearned_income: 2_500
  output:
    # Unearned counts fully: $2,500
    wv_tanf_countable_income: 2_500

- name: Case 11, disregard precisely halves earned portion.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 100
    tanf_gross_unearned_income: 60
  output:
    # Earned: $100 × 0.60 = 60
    # Unearned: $60 (no disregard)
    # Countable = 60 + 60 = 120
    wv_tanf_countable_income: 120

- name: Case 12, earned income at income limit for size 8.
  period: 2025-01
  input:
    state_code: WV
    tanf_gross_earned_income: 2_016
    tanf_gross_unearned_income: 0
  output:
    # Earned at size 8 limit: $2,016 × 0.60 = 1,209.60
    wv_tanf_countable_income: 1_209.6
