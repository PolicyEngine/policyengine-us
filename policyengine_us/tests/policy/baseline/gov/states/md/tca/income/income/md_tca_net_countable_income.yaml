# Tests net countable income calculation
# Formula: max(gross_earned - earnings_deduction - childcare, 0) + unearned

- name: Case 1, earned income minus deductions.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 12_000
    spm_units:
      spm_unit:
        members: [person1]
        md_tca_earnings_deduction: 400
        md_tca_childcare_deduction: 0
    households:
      household:
        state_code: MD
  output:
    # max($1,000 - $400 - $0, 0) + $0 = $600
    md_tca_net_countable_income: 600

- name: Case 2, earned and unearned income minus deductions.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 12_000
        social_security: 6_000
    spm_units:
      spm_unit:
        members: [person1]
        md_tca_earnings_deduction: 400
        md_tca_childcare_deduction: 100
    households:
      household:
        state_code: MD
  output:
    # max($1,000 - $400 - $100, 0) + $500 = $500 + $500 = $1,000
    md_tca_net_countable_income: 1_000

- name: Case 3, deductions exceed earned income.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
        employment_income_before_lsr: 2_400
        social_security: 3_600
    spm_units:
      spm_unit:
        members: [person1]
        md_tca_earnings_deduction: 100
        md_tca_childcare_deduction: 200
    households:
      household:
        state_code: MD
  output:
    # max($200 - $100 - $200, 0) + $300 = $0 + $300 = $300
    md_tca_net_countable_income: 300

- name: Case 4, zero income.
  period: 2024-01
  input:
    people:
      person1:
        age: 30
    spm_units:
      spm_unit:
        members: [person1]
        md_tca_earnings_deduction: 0
        md_tca_childcare_deduction: 0
    households:
      household:
        state_code: MD
  output:
    md_tca_net_countable_income: 0
