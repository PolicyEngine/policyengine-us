# MSP uses SSI income methodology per 42 U.S.C. 1396d(p)(1)(B):
# Countable = unearned - $20 (or earned - $85 - 50% remaining)
# For 2024 individual FPL = $15,060:
#   QMB: <= 100% = $1,255/month countable
#   SLMB: 100-120% = $1,255.01-$1,506/month countable
#   QI: 120-135% = $1,506.01-$1,694.25/month countable

- name: MSP category - QMB (income at 100% FPL)
  period: 2024-01
  input:
    age: 67
    is_medicare_eligible: true
    # $12,000 unearned -> ($1,000 - $20) = $980/month countable
    # $980 < $1,255 (100% FPL) -> QMB
    ssi_unearned_income: 12_000
    spm_unit_cash_assets: 5_000
    spm_unit_is_married: false
  output:
    msp_category: QMB

- name: MSP category - SLMB (income between 100-120% FPL)
  period: 2024-01
  input:
    age: 67
    is_medicare_eligible: true
    # $16,500 unearned -> ($1,375 - $20) = $1,355/month countable
    # $1,255 < $1,355 < $1,506 (100-120% FPL) -> SLMB
    ssi_unearned_income: 16_500
    spm_unit_cash_assets: 5_000
    spm_unit_is_married: false
  output:
    msp_category: SLMB

- name: MSP category - QI (income between 120-135% FPL)
  period: 2024-01
  input:
    age: 67
    is_medicare_eligible: true
    # $19,440 unearned -> ($1,620 - $20) = $1,600/month countable
    # $1,506 < $1,600 < $1,694.25 (120-135% FPL) -> QI
    ssi_unearned_income: 19_440
    spm_unit_cash_assets: 5_000
    spm_unit_is_married: false
    # QI requires not being eligible for other Medicaid
    is_medicaid_eligible: false
  output:
    msp_category: QI

- name: MSP category - NONE (income above 135% FPL)
  period: 2024-01
  input:
    age: 67
    is_medicare_eligible: true
    # $21_840 unearned -> ($1,820 - $20) = $1,800/month countable
    # $1,800 > $1,694.25 (135% FPL) -> NONE
    ssi_unearned_income: 21_840
    spm_unit_cash_assets: 5_000
    spm_unit_is_married: false
  output:
    msp_category: NONE

- name: MSP category - NONE (not Medicare eligible)
  period: 2024-01
  input:
    age: 60
    is_medicare_eligible: false
    ssi_unearned_income: 10_000
    spm_unit_cash_assets: 5_000
    spm_unit_is_married: false
  output:
    msp_category: NONE
