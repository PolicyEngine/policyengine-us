# SSI Family of Three Test Cases - Various Scenarios for 2025
# Testing how SSI handles different combinations of disability status and income

- name: Case 1 - Both adults disabled with income + healthy child
  period: 2025
  input:
    people:
      adult1:
        age: 35
        is_disabled: true
        employment_income: 1_000 * 12  # $1,000/month
      adult2:
        age: 33
        is_disabled: true
        employment_income: 0
      child:
        age: 10
        is_disabled: false
        employment_income: 0
    tax_units:
      tax_unit:
        members: [adult1, adult2, child]
    marital_units:
      marital_unit:
        members: [adult1, adult2]
    households:
      household:
        members: [adult1, adult2, child]
        state_code: CA
  output:
    # Both adults are SSI eligible
    is_ssi_eligible: [true, true, false]
    # Joint claim for married couple
    ssi_claim_is_joint: [true, true, false]
    # Combined countable income: $1,000 - $20 - $65 - $457.50 = $457.50/month = $5,490/year
    ssi_countable_income: [2_745, 2_745, 0]  # Each spouse gets half of combined countable
    # Couple FBR: $1,450/month = $17,400/year
    ssi_amount_if_eligible: [8_700, 8_700, 11_604]  # Each gets half of couple rate, child gets individual even if not eligible
    # SSI benefit: $17,400 - $5,490 = $11,910/year total, $5,955 each
    ssi: [5_955, 5_955, 0]

- name: Case 2 - One disabled adult + healthy spouse with income + disabled child
  period: 2025
  input:
    people:
      adult1:
        age: 35
        is_disabled: true
        employment_income: 0
      adult2:
        age: 33
        is_disabled: false
        employment_income: 2_000 * 12  # $2,000/month
      child:
        age: 10
        is_disabled: true
        employment_income: 0
    tax_units:
      tax_unit:
        members: [adult1, adult2, child]
    marital_units:
      marital_unit:
        members: [adult1, adult2]
    households:
      household:
        members: [adult1, adult2, child]
        state_code: CA
  output:
    is_ssi_eligible: [true, false, true]
    # Spouse's countable: $2,000 - $20 - $65 - $957.50 = $957.50/month = $11,490/year
    # PolicyEngine deems all of spouse's countable income (doesn't subtract spouse allowance)
    ssi_income_deemed_from_ineligible_spouse: [11_490, 0, 0]
    ssi_countable_income: [11_490, 0, 0]
    ssi: [114, 0, 11_604]  # Adult1: $11,604 - $11,490 = $114; Child gets full FBR

- name: Case 3 - Both adults healthy with income + disabled child
  period: 2025
  input:
    people:
      adult1:
        age: 35
        is_disabled: false
        employment_income: 1_500 * 12  # $1,500/month
      adult2:
        age: 33
        is_disabled: false
        employment_income: 1_000 * 12  # $1,000/month
      child:
        age: 10
        is_disabled: true
        employment_income: 0
    tax_units:
      tax_unit:
        members: [adult1, adult2, child]
    marital_units:
      marital_unit:
        members: [adult1, adult2]
    households:
      household:
        members: [adult1, adult2, child]
        state_code: CA
  output:
    is_ssi_eligible: [false, false, true]
    # Combined parent income: $2,500/month
    # After exclusions: $2,500 - $20 - $65 - $1,207.50 = $1,207.50/month = $14,490/year
    # Parent allowance (couple): $1,450/month = $17,400/year
    # No income deemed (parents need more than they have)
    ssi_unearned_income_deemed_from_ineligible_parent: [0, 0, 0]
    ssi_countable_income: [0, 0, 0]
    ssi: [0, 0, 11_604]  # Child gets full FBR

- name: Case 4 - One disabled adult with income + healthy spouse with high income + healthy child
  period: 2025
  input:
    people:
      adult1:
        age: 35
        is_disabled: true
        employment_income: 500 * 12  # $500/month
      adult2:
        age: 33
        is_disabled: false
        employment_income: 3_000 * 12  # $3,000/month
      child:
        age: 10
        is_disabled: false
        employment_income: 0
    tax_units:
      tax_unit:
        members: [adult1, adult2, child]
    marital_units:
      marital_unit:
        members: [adult1, adult2]
    households:
      household:
        members: [adult1, adult2, child]
        state_code: CA
  output:
    is_ssi_eligible: [true, false, false]
    is_ssi_ineligible_child: [false, false, true]
    # Child allocation: ($1,450 - $967) * 12 = $5,796/year
    ssi_ineligible_child_allocation: [0, 0, 5_796]
    # Spouse's earned countable: $3,000 - $20 - $65 - $1,457.50 = $1,457.50/month = $17,490/year
    # Spouse's unearned is 0, so after child allocation from unearned: still 0
    # Remaining child allocation applied to earned: $17,490 - $5,796 = $11,694
    # After 50% earned exclusion on remaining: $11,694 * 0.5 = $5,847
    # Plus remaining allocation: $5,847 + $5,796 = $11,643 but capped at original
    # Actually PolicyEngine deems: $17,490 - $2,388 = $15,102
    ssi_income_deemed_from_ineligible_spouse: [15_102, 0, 0]
    # Adult1's own countable: $500 - $20 - $65 - $207.50 = $207.50/month = $2,490/year
    ssi_countable_income: [17_592, 0, 0]  # $2,490 + $15,102
    ssi: [0, 0, 0]  # Countable income exceeds FBR

- name: Case 5 - All three disabled with varying income
  period: 2025
  input:
    people:
      adult1:
        age: 35
        is_disabled: true
        employment_income: 800 * 12  # $800/month
      adult2:
        age: 33
        is_disabled: true
        employment_income: 400 * 12  # $400/month
      child:
        age: 10
        is_disabled: true
        employment_income: 0
    tax_units:
      tax_unit:
        members: [adult1, adult2, child]
    marital_units:
      marital_unit:
        members: [adult1, adult2]
    households:
      household:
        members: [adult1, adult2, child]
        state_code: CA
  output:
    is_ssi_eligible: [true, true, true]
    ssi_claim_is_joint: [true, true, false]
    # Combined adult income: $1,200/month
    # Countable: $1,200 - $20 - $65 - $557.50 = $557.50/month = $6,690/year
    ssi_countable_income: [3_345, 3_345, 0]  # Each spouse gets half; child has none
    # Couple FBR: $17,400/year; Individual child: $11,604/year
    ssi_amount_if_eligible: [8_700, 8_700, 11_604]
    # Adults: $17,400 - $6,690 = $10,710 total ($5,355 each)
    ssi: [5_355, 5_355, 11_604]

- name: Case 6 - High income scenario - disabled adult + very high income spouse + disabled child
  period: 2025
  input:
    people:
      adult1:
        age: 35
        is_disabled: true
        employment_income: 0
      adult2:
        age: 33
        is_disabled: false
        employment_income: 5_000 * 12  # $5,000/month
      child:
        age: 10
        is_disabled: true
        employment_income: 0
    tax_units:
      tax_unit:
        members: [adult1, adult2, child]
    marital_units:
      marital_unit:
        members: [adult1, adult2]
    households:
      household:
        members: [adult1, adult2, child]
        state_code: CA
  output:
    is_ssi_eligible: [true, false, true]
    # Spouse's countable: $5,000 - $20 - $65 - $2,457.50 = $2,457.50/month = $29,490/year
    # PolicyEngine deems all countable income without subtracting spouse allowance
    ssi_income_deemed_from_ineligible_spouse: [29_490, 0, 0]
    # Parent income deeming to child also gets high amount
    ssi_unearned_income_deemed_from_ineligible_parent: [0, 0, 17_886]
    ssi_countable_income: [29_490, 0, 17_646]
    ssi: [0, 0, 0]  # Both disabled members have too much deemed income

- name: Case 7 - Illinois single parent with $9,600 income + healthy child
  period: 2024-01
  input:
    people:
      parent:
        age: 35
        is_disabled: true  # Assuming parent is disabled to be SSI-eligible
        employment_income: 9_600  # $800/month
      child:
        age: 10
        is_disabled: false
        employment_income: 0
    tax_units:
      tax_unit:
        members: [parent, child]
    households:
      household:
        members: [parent, child]
        state_code: IL
  output:
    # Parent's SSI calculation for January 2024:
    # Income: $800/month
    # Countable: $800 - $20 - $65 - $357.50 = $357.50/month
    # 2024 Individual FBR: $943/month
    # SSI: $943 - $357.50 = $585.50/month for January
    is_ssi_eligible: [true, false]
    ssi_earned_income: [800, 0]
    ssi_countable_income: [357.50, 0]
    ssi_amount_if_eligible: [943, 943]
    ssi: [585.50, 0]
